"use strict";var Ca=Object.create;var qn=Object.defineProperty;var Fa=Object.getOwnPropertyDescriptor;var za=Object.getOwnPropertyNames;var ka=Object.getPrototypeOf,qa=Object.prototype.hasOwnProperty;var q=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var La=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of za(t))!qa.call(e,i)&&i!==r&&qn(e,i,{get:()=>t[i],enumerable:!(n=Fa(t,i))||n.enumerable});return e};var Ln=(e,t,r)=>(r=e!=null?Ca(ka(e)):{},La(t||!e||!e.__esModule?qn(r,"default",{value:e,enumerable:!0}):r,e));var de=q(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.__assign=function(){return Te.__assign=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Te.__assign.apply(this,arguments)};function Ua(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function Va(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xa(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],u;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(f){u={error:f}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a}function Ga(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}Te.__read=Xa;Te.__rest=Ua;Te.__spreadArray=Ga;Te.__values=Va});var We=q(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.ActionTypes=void 0;(function(e){e.Start="xstate.start",e.Stop="xstate.stop",e.Raise="xstate.raise",e.Send="xstate.send",e.Cancel="xstate.cancel",e.NullEvent="",e.Assign="xstate.assign",e.After="xstate.after",e.DoneState="done.state",e.DoneInvoke="done.invoke",e.Log="xstate.log",e.Init="xstate.init",e.Invoke="xstate.invoke",e.ErrorExecution="error.execution",e.ErrorCommunication="error.communication",e.ErrorPlatform="error.platform",e.ErrorCustom="xstate.error",e.Update="xstate.update",e.Pure="xstate.pure",e.Choose="xstate.choose"})(qe.ActionTypes||(qe.ActionTypes={}));qe.SpecialTargets=void 0;(function(e){e.Parent="#_parent",e.Internal="#_internal"})(qe.SpecialTargets||(qe.SpecialTargets={}))});var Be=q(K=>{"use strict";Object.defineProperty(K,"__esModule",{value:!0});var Q=We(),Ja=Q.ActionTypes.Start,Wa=Q.ActionTypes.Stop,Ka=Q.ActionTypes.Raise,$a=Q.ActionTypes.Send,Ya=Q.ActionTypes.Cancel,Ba=Q.ActionTypes.NullEvent,Qa=Q.ActionTypes.Assign,Ha=Q.ActionTypes.After,Za=Q.ActionTypes.DoneState,eo=Q.ActionTypes.Log,to=Q.ActionTypes.Init,ro=Q.ActionTypes.Invoke,no=Q.ActionTypes.ErrorExecution,io=Q.ActionTypes.ErrorPlatform,ao=Q.ActionTypes.ErrorCustom,oo=Q.ActionTypes.Update,so=Q.ActionTypes.Choose,uo=Q.ActionTypes.Pure;K.after=Ha;K.assign=Qa;K.cancel=Ya;K.choose=so;K.doneState=Za;K.error=ao;K.errorExecution=no;K.errorPlatform=io;K.init=to;K.invoke=ro;K.log=eo;K.nullEvent=Ba;K.pure=uo;K.raise=Ka;K.send=$a;K.start=Ja;K.stop=Wa;K.update=oo});var kt=q(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});var fo=".",co={},lo="xstate.guard",ho="";Qe.DEFAULT_GUARD_TYPE=lo;Qe.EMPTY_ACTIVITY_MAP=co;Qe.STATE_DELIMITER=fo;Qe.TARGETLESS_KEY=ho});var Ie=q(Pr=>{"use strict";Object.defineProperty(Pr,"__esModule",{value:!0});var vo=process.env.NODE_ENV==="production";Pr.IS_PRODUCTION=vo});var _e=q(x=>{"use strict";Object.defineProperty(x,"__esModule",{value:!0});var ne=de(),po=We(),Un=Be(),yt=kt(),Er=Ie(),qt;function yo(e){return Object.keys(e)}function Vn(e,t,r){r===void 0&&(r=yt.STATE_DELIMITER);var n=Ar(e,r),i=Ar(t,r);return ge(i)?ge(n)?i===n:!1:ge(n)?n in i:Object.keys(n).every(function(a){return a in i?Vn(n[a],i[a]):!1})}function go(e){try{return ge(e)||typeof e=="number"?"".concat(e):e.type}catch{throw new Error("Events must be strings or objects with a string event.type property.")}}function _o(e){try{return ge(e)||typeof e=="number"?"".concat(e):Se(e)?e.name:e.type}catch{throw new Error("Actions must be strings or objects with a string action.type property.")}}function Xn(e,t){try{return Lt(e)?e:e.toString().split(t)}catch{throw new Error("'".concat(e,"' is not a valid state path."))}}function Gn(e){return typeof e=="object"&&"value"in e&&"context"in e&&"event"in e&&"_event"in e}function Ar(e,t){if(Gn(e))return e.value;if(Lt(e))return xr(e);if(typeof e!="string")return e;var r=Xn(e,t);return xr(r)}function xr(e){if(e.length===1)return e[0];for(var t={},r=t,n=0;n<e.length-1;n++)n===e.length-2?r[e[n]]=e[n+1]:(r[e[n]]={},r=r[e[n]]);return t}function Jn(e,t){for(var r={},n=Object.keys(e),i=0;i<n.length;i++){var a=n[i];r[a]=t(e[a],a,e,i)}return r}function mo(e,t,r){var n,i,a={};try{for(var u=ne.__values(Object.keys(e)),f=u.next();!f.done;f=u.next()){var c=f.value,o=e[c];r(o)&&(a[c]=t(o,c,e))}}catch(s){n={error:s}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return a}var bo=function(e){return function(t){var r,n,i=t;try{for(var a=ne.__values(e),u=a.next();!u.done;u=a.next()){var f=u.value;i=i[f]}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}};function So(e,t){return function(r){var n,i,a=r;try{for(var u=ne.__values(e),f=u.next();!f.done;f=u.next()){var c=f.value;a=a[t][c]}}catch(o){n={error:o}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return a}}function Wn(e){if(!e)return[[]];if(ge(e))return[[e]];var t=Kn(Object.keys(e).map(function(r){var n=e[r];return typeof n!="string"&&(!n||!Object.keys(n).length)?[[r]]:Wn(e[r]).map(function(i){return[r].concat(i)})}));return t}function wo(e){var t,r,n={};if(e&&e.length===1&&e[0].length===1)return e[0][0];try{for(var i=ne.__values(e),a=i.next();!a.done;a=i.next())for(var u=a.value,f=n,c=0;c<u.length;c++){var o=u[c];if(c===u.length-2){f[o]=u[c+1];break}f[o]=f[o]||{},f=f[o]}}catch(s){t={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}function Kn(e){var t;return(t=[]).concat.apply(t,ne.__spreadArray([],ne.__read(e),!1))}function Tr(e){return Lt(e)?e:[e]}function $n(e){return e===void 0?[]:Tr(e)}function Oo(e,t,r){var n,i;if(Se(e))return e(t,r.data);var a={};try{for(var u=ne.__values(Object.keys(e)),f=u.next();!f.done;f=u.next()){var c=f.value,o=e[c];Se(o)?a[c]=o(t,r.data):a[c]=o}}catch(s){n={error:s}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return a}function Po(e){return/^(done|error)\./.test(e)}function Ao(e){return!!(e instanceof Promise||e!==null&&(Se(e)||typeof e=="object")&&Se(e.then))}function xo(e){return e!==null&&typeof e=="object"&&"transition"in e&&typeof e.transition=="function"}function Eo(e,t){var r,n,i=ne.__read([[],[]],2),a=i[0],u=i[1];try{for(var f=ne.__values(e),c=f.next();!c.done;c=f.next()){var o=c.value;t(o)?a.push(o):u.push(o)}}catch(s){r={error:s}}finally{try{c&&!c.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}return[a,u]}function Ir(e,t){return Jn(e.states,function(r,n){if(r){var i=(ge(t)?void 0:t[n])||(r?r.current:void 0);if(i)return{current:i,states:Ir(r,i)}}})}function To(e,t){return{current:t,states:Ir(e,t)}}function Io(e,t,r,n){Er.IS_PRODUCTION||x.warn(!!e,"Attempting to update undefined context");var i=e&&r.reduce(function(a,u){var f,c,o=u.assignment,s={state:n,action:u,_event:t},d={};if(Se(o))d=o(a,t.data,s);else try{for(var l=ne.__values(Object.keys(o)),h=l.next();!h.done;h=l.next()){var v=h.value,p=o[v];d[v]=Se(p)?p(a,t.data,s):p}}catch(y){f={error:y}}finally{try{h&&!h.done&&(c=l.return)&&c.call(l)}finally{if(f)throw f.error}}return Object.assign({},a,d)},e);return i}x.warn=function(){};Er.IS_PRODUCTION||(x.warn=function(e,t){var r=e instanceof Error?e:void 0;if(!(!r&&e)&&console!==void 0){var n=["Warning: ".concat(t)];r&&n.push(r),console.warn.apply(console,n)}});function Lt(e){return Array.isArray(e)}function Se(e){return typeof e=="function"}function ge(e){return typeof e=="string"}function jo(e,t){if(e)return ge(e)?{type:yt.DEFAULT_GUARD_TYPE,name:e,predicate:t?t[e]:void 0}:Se(e)?{type:yt.DEFAULT_GUARD_TYPE,name:e.name,predicate:e}:e}function No(e){try{return"subscribe"in e&&Se(e.subscribe)}catch{return!1}}var Yn=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Do=(qt={},qt[Yn]=function(){return this},qt[Symbol.observable]=function(){return this},qt);function Bn(e){return!!e&&"__xstatenode"in e}function Mo(e){return!!e&&typeof e.send=="function"}var Ro=function(){var e=0;return function(){return e++,e.toString(16)}}();function Qn(e,t){return ge(e)||typeof e=="number"?ne.__assign({type:e},t):e}function Co(e,t){if(!ge(e)&&"$$type"in e&&e.$$type==="scxml")return e;var r=Qn(e);return ne.__assign({name:r.type,data:r,$$type:"scxml",type:"external"},t)}function Fo(e,t){var r=Tr(t).map(function(n){return typeof n>"u"||typeof n=="string"||Bn(n)?{target:n,event:e}:ne.__assign(ne.__assign({},n),{event:e})});return r}function zo(e){if(!(e===void 0||e===yt.TARGETLESS_KEY))return $n(e)}function ko(e,t,r){if(!Er.IS_PRODUCTION){var n=e.stack?" Stacktrace was '".concat(e.stack,"'"):"";if(e===t)console.error("Missing onError handler for invocation '".concat(r,"', error was '").concat(e,"'.").concat(n));else{var i=t.stack?" Stacktrace was '".concat(t.stack,"'"):"";console.error("Missing onError handler and/or unhandled exception/promise rejection for invocation '".concat(r,"'. ")+"Original error: '".concat(e,"'. ").concat(n," Current error is '").concat(t,"'.").concat(i))}}}function qo(e,t,r,n,i){var a=e.options.guards,u={state:i,cond:t,_event:n};if(t.type===yt.DEFAULT_GUARD_TYPE)return(a?.[t.name]||t.predicate)(r,n.data,u);var f=a?.[t.type];if(!f)throw new Error("Guard '".concat(t.type,"' is not implemented on machine '").concat(e.id,"'."));return f(r,n.data,u)}function Lo(e){return typeof e=="string"?{type:e}:e}function Uo(e,t,r){var n=function(){},i=typeof e=="object",a=i?e:null;return{next:((i?e.next:e)||n).bind(a),error:((i?e.error:t)||n).bind(a),complete:((i?e.complete:r)||n).bind(a)}}function Vo(e,t){return"".concat(e,":invocation[").concat(t,"]")}function Xo(e){return(e.type===Un.raise||e.type===Un.send&&e.to===po.SpecialTargets.Internal)&&typeof e.delay!="number"}x.createInvokeId=Vo;x.evaluateGuard=qo;x.flatten=Kn;x.getActionType=_o;x.getEventType=go;x.interopSymbols=Do;x.isActor=Mo;x.isArray=Lt;x.isBehavior=xo;x.isBuiltInEvent=Po;x.isFunction=Se;x.isMachine=Bn;x.isObservable=No;x.isPromiseLike=Ao;x.isRaisableAction=Xo;x.isStateLike=Gn;x.isString=ge;x.keys=yo;x.mapContext=Oo;x.mapFilterValues=mo;x.mapValues=Jn;x.matchesState=Vn;x.nestedPath=So;x.normalizeTarget=zo;x.partition=Eo;x.path=bo;x.pathToStateValue=xr;x.pathsToStateValue=wo;x.reportUnhandledExceptionOnInvocation=ko;x.symbolObservable=Yn;x.toArray=$n;x.toArrayStrict=Tr;x.toEventObject=Qn;x.toGuard=jo;x.toInvokeSource=Lo;x.toObserver=Uo;x.toSCXMLEvent=Co;x.toStatePath=Xn;x.toStatePaths=Wn;x.toStateValue=Ar;x.toTransitionConfigArray=Fo;x.uniqueId=Ro;x.updateContext=Io;x.updateHistoryStates=Ir;x.updateHistoryValue=To});var He=q(C=>{"use strict";Object.defineProperty(C,"__esModule",{value:!0});var R=de(),he=We(),H=Be(),j=_e(),Hn=Ie(),Go=j.toSCXMLEvent({type:H.init});function jr(e,t){return t&&t[e]||void 0}function Ut(e,t){var r;if(j.isString(e)||typeof e=="number"){var n=jr(e,t);j.isFunction(n)?r={type:e,exec:n}:n?r=n:r={type:e,exec:void 0}}else if(j.isFunction(e))r={type:e.name||e.toString(),exec:e};else{var n=jr(e.type,t);if(j.isFunction(n))r=R.__assign(R.__assign({},e),{exec:n});else if(n){var i=n.type||e.type;r=R.__assign(R.__assign(R.__assign({},n),e),{type:i})}else r=e}return r}var Nr=function(e,t){if(!e)return[];var r=j.isArray(e)?e:[e];return r.map(function(n){return Ut(n,t)})};function Mr(e){var t=Ut(e);return R.__assign(R.__assign({id:j.isString(e)?e:t.id},t),{type:t.type})}function Jo(e,t){return{type:H.raise,event:typeof e=="function"?e:j.toEventObject(e),delay:t?t.delay:void 0,id:t?.id}}function Zn(e,t,r,n){var i={_event:r},a=j.toSCXMLEvent(j.isFunction(e.event)?e.event(t,r.data,i):e.event),u;if(j.isString(e.delay)){var f=n&&n[e.delay];u=j.isFunction(f)?f(t,r.data,i):f}else u=j.isFunction(e.delay)?e.delay(t,r.data,i):e.delay;return R.__assign(R.__assign({},e),{type:H.raise,_event:a,delay:u})}function gt(e,t){return{to:t?t.to:void 0,type:H.send,event:j.isFunction(e)?e:j.toEventObject(e),delay:t?t.delay:void 0,id:t&&t.id!==void 0?t.id:j.isFunction(e)?e.name:j.getEventType(e)}}function ei(e,t,r,n){var i={_event:r},a=j.toSCXMLEvent(j.isFunction(e.event)?e.event(t,r.data,i):e.event),u;if(j.isString(e.delay)){var f=n&&n[e.delay];u=j.isFunction(f)?f(t,r.data,i):f}else u=j.isFunction(e.delay)?e.delay(t,r.data,i):e.delay;var c=j.isFunction(e.to)?e.to(t,r.data,i):e.to;return R.__assign(R.__assign({},e),{to:c,_event:a,event:a.data,delay:u})}function Rr(e,t){return gt(e,R.__assign(R.__assign({},t),{to:he.SpecialTargets.Parent}))}function Wo(e,t,r){return gt(t,R.__assign(R.__assign({},r),{to:e}))}function Ko(){return Rr(H.update)}function $o(e,t){return gt(e,R.__assign(R.__assign({},t),{to:function(r,n,i){var a=i._event;return a.origin}}))}var Yo=function(e,t){return{context:e,event:t}};function Bo(e,t){return e===void 0&&(e=Yo),{type:H.log,label:t,expr:e}}var ti=function(e,t,r){return R.__assign(R.__assign({},e),{value:j.isString(e.expr)?e.expr:e.expr(t,r.data,{_event:r})})},Qo=function(e){return{type:H.cancel,sendId:e}};function Ho(e){var t=Mr(e);return{type:he.ActionTypes.Start,activity:t,exec:void 0}}function Zo(e){var t=j.isFunction(e)?e:Mr(e);return{type:he.ActionTypes.Stop,activity:t,exec:void 0}}function ri(e,t,r){var n=j.isFunction(e.activity)?e.activity(t,r.data):e.activity,i=typeof n=="string"?{id:n}:n,a={type:he.ActionTypes.Stop,activity:i};return a}var es=function(e){return{type:H.assign,assignment:e}};function ts(e){return typeof e=="object"&&"type"in e}function rs(e,t){var r=t?"#".concat(t):"";return"".concat(he.ActionTypes.After,"(").concat(e,")").concat(r)}function ns(e,t){var r="".concat(he.ActionTypes.DoneState,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function is(e,t){var r="".concat(he.ActionTypes.DoneInvoke,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function as(e,t){var r="".concat(he.ActionTypes.ErrorPlatform,".").concat(e),n={type:r,data:t};return n.toString=function(){return r},n}function os(e){return{type:he.ActionTypes.Pure,get:e}}function ss(e,t){if(!Hn.IS_PRODUCTION&&(!e||typeof e=="function")){var r=e;e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=typeof r=="function"?r.apply(void 0,R.__spreadArray([],R.__read(n),!1)):r;if(!a)throw new Error("Attempted to forward event to undefined actor. This risks an infinite loop in the sender.");return a}}return gt(function(n,i){return i},R.__assign(R.__assign({},t),{to:e}))}function us(e,t){return Rr(function(r,n,i){return{type:H.error,data:j.isFunction(e)?e(r,n,i):e}},R.__assign(R.__assign({},t),{to:he.SpecialTargets.Parent}))}function fs(e){return{type:he.ActionTypes.Choose,conds:e}}var cs=function(e){var t,r,n=[];try{for(var i=R.__values(e),a=i.next();!a.done;a=i.next())for(var u=a.value,f=0;f<u.actions.length;){if(u.actions[f].type===H.assign){n.push(u.actions[f]),u.actions.splice(f,1);continue}f++}}catch(c){t={error:c}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n};function Dr(e,t,r,n,i,a,u){u===void 0&&(u=!1);var f=u?[]:cs(i),c=f.length?j.updateContext(r,n,f,t):r,o=u?[r]:void 0,s=[];function d(v,p){var y;switch(p.type){case H.raise:{var g=Zn(p,c,n,e.options.delays);return a&&typeof g.delay=="number"&&a(g,c,n),g}case H.send:var _=ei(p,c,n,e.options.delays);if(!Hn.IS_PRODUCTION){var m=p.delay;j.warn(!j.isString(m)||typeof _.delay=="number","No delay reference for delay expression '".concat(m,"' was found on machine '").concat(e.id,"'"))}return a&&_.to!==he.SpecialTargets.Internal&&(v==="entry"?s.push(_):a(_,c,n)),_;case H.log:{var w=ti(p,c,n);return a?.(w,c,n),w}case H.choose:{var O=p,A=(y=O.conds.find(function(Je){var ke=j.toGuard(Je.cond,e.options.guards);return!ke||j.evaluateGuard(e,ke,c,n,a?void 0:t)}))===null||y===void 0?void 0:y.actions;if(!A)return[];var D=R.__read(Dr(e,t,c,n,[{type:v,actions:Nr(j.toArray(A),e.options.actions)}],a,u),2),k=D[0],M=D[1];return c=M,o?.push(c),k}case H.pure:{var A=p.get(c,n.data);if(!A)return[];var W=R.__read(Dr(e,t,c,n,[{type:v,actions:Nr(j.toArray(A),e.options.actions)}],a,u),2),I=W[0],L=W[1];return c=L,o?.push(c),I}case H.stop:{var w=ri(p,c,n);return a?.(w,r,n),w}case H.assign:{c=j.updateContext(c,n,[p],a?void 0:t),o?.push(c);break}default:var B=Ut(p,e.options.actions),se=B.exec;if(a)a(B,c,n);else if(se&&o){var pt=o.length-1,Or=R.__assign(R.__assign({},B),{exec:function(Je){for(var ke=[],ve=1;ve<arguments.length;ve++)ke[ve-1]=arguments[ve];se.apply(void 0,R.__spreadArray([o[pt]],R.__read(ke),!1))}});B=Or}return B}}function l(v){var p,y,g=[];try{for(var _=R.__values(v.actions),m=_.next();!m.done;m=_.next()){var w=m.value,O=d(v.type,w);O&&(g=g.concat(O))}}catch(A){p={error:A}}finally{try{m&&!m.done&&(y=_.return)&&y.call(_)}finally{if(p)throw p.error}}return s.forEach(function(A){a(A,c,n)}),s.length=0,g}var h=j.flatten(i.map(l));return[h,c]}C.actionTypes=H;C.after=rs;C.assign=es;C.cancel=Qo;C.choose=fs;C.done=ns;C.doneInvoke=is;C.error=as;C.escalate=us;C.forwardTo=ss;C.getActionFunction=jr;C.initEvent=Go;C.isActionObject=ts;C.log=Bo;C.pure=os;C.raise=Jo;C.resolveActions=Dr;C.resolveLog=ti;C.resolveRaise=Zn;C.resolveSend=ei;C.resolveStop=ri;C.respond=$o;C.send=gt;C.sendParent=Rr;C.sendTo=Wo;C.sendUpdate=Ko;C.start=Ho;C.stop=Zo;C.toActionObject=Ut;C.toActionObjects=Nr;C.toActivityDefinition=Mr});var Cr=q(Xt=>{"use strict";Object.defineProperty(Xt,"__esModule",{value:!0});var Vt=[],ls=function(e,t){Vt.push(e);var r=t(e);return Vt.pop(),r},ds=function(e){return e(Vt[Vt.length-1])};Xt.consume=ds;Xt.provide=ls});var mt=q(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});var hs=de(),_t=_e(),vs=Cr();function Fr(e){var t;return t={id:e,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:e}}},t[_t.symbolObservable]=function(){return this},t}function ps(e,t,r,n){var i,a=_t.toInvokeSource(e.src),u=(i=t?.options.services)===null||i===void 0?void 0:i[a.type],f=e.data?_t.mapContext(e.data,r,n):void 0,c=u?ni(u,e.id,f):Fr(e.id);return c.meta=e,c}function ni(e,t,r){var n=Fr(t);if(n.deferred=!0,_t.isMachine(e)){var i=n.state=vs.provide(void 0,function(){return(r?e.withContext(r):e).initialState});n.getSnapshot=function(){return i}}return n}function ii(e){try{return typeof e.send=="function"}catch{return!1}}function ys(e){return ii(e)&&"id"in e}function gs(e){var t;return hs.__assign((t={subscribe:function(){return{unsubscribe:function(){}}},id:"anonymous",getSnapshot:function(){}},t[_t.symbolObservable]=function(){return this},t),e)}Le.createDeferredActor=ni;Le.createInvocableActor=ps;Le.createNullActor=Fr;Le.isActor=ii;Le.isSpawnedActor=ys;Le.toActorRef=gs});var qr=q(ie=>{"use strict";Object.defineProperty(ie,"__esModule",{value:!0});var je=de(),zr=_e(),kr=function(e){return e.type==="atomic"||e.type==="final"};function ai(e){return Object.keys(e.states).map(function(t){return e.states[t]})}function bt(e){return ai(e).filter(function(t){return t.type!=="history"})}function oi(e){var t=[e];return kr(e)?t:t.concat(zr.flatten(bt(e).map(oi)))}function si(e,t){var r,n,i,a,u,f,c,o,s=new Set(e),d=Gt(s),l=new Set(t);try{for(var h=je.__values(l),v=h.next();!v.done;v=h.next())for(var p=v.value,y=p.parent;y&&!l.has(y);)l.add(y),y=y.parent}catch(M){r={error:M}}finally{try{v&&!v.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}var g=Gt(l);try{for(var _=je.__values(l),m=_.next();!m.done;m=_.next()){var p=m.value;if(p.type==="compound"&&(!g.get(p)||!g.get(p).length))d.get(p)?d.get(p).forEach(function(W){return l.add(W)}):p.initialStateNodes.forEach(function(W){return l.add(W)});else if(p.type==="parallel")try{for(var w=(u=void 0,je.__values(bt(p))),O=w.next();!O.done;O=w.next()){var A=O.value;l.has(A)||(l.add(A),d.get(A)?d.get(A).forEach(function(W){return l.add(W)}):A.initialStateNodes.forEach(function(W){return l.add(W)}))}}catch(W){u={error:W}}finally{try{O&&!O.done&&(f=w.return)&&f.call(w)}finally{if(u)throw u.error}}}}catch(M){i={error:M}}finally{try{m&&!m.done&&(a=_.return)&&a.call(_)}finally{if(i)throw i.error}}try{for(var D=je.__values(l),k=D.next();!k.done;k=D.next())for(var p=k.value,y=p.parent;y&&!l.has(y);)l.add(y),y=y.parent}catch(M){c={error:M}}finally{try{k&&!k.done&&(o=D.return)&&o.call(D)}finally{if(c)throw c.error}}return l}function ui(e,t){var r=t.get(e);if(!r)return{};if(e.type==="compound"){var n=r[0];if(n){if(kr(n))return n.key}else return{}}var i={};return r.forEach(function(a){i[a.key]=ui(a,t)}),i}function Gt(e){var t,r,n=new Map;try{for(var i=je.__values(e),a=i.next();!a.done;a=i.next()){var u=a.value;n.has(u)||n.set(u,[]),u.parent&&(n.has(u.parent)||n.set(u.parent,[]),n.get(u.parent).push(u))}}catch(f){t={error:f}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n}function _s(e,t){var r=si([e],t);return ui(e,Gt(r))}function fi(e,t){return Array.isArray(e)?e.some(function(r){return r===t}):e instanceof Set?e.has(t):!1}function ms(e){return je.__spreadArray([],je.__read(new Set(zr.flatten(je.__spreadArray([],je.__read(e.map(function(t){return t.ownEvents})),!1)))),!1)}function ci(e,t){return t.type==="compound"?bt(t).some(function(r){return r.type==="final"&&fi(e,r)}):t.type==="parallel"?bt(t).every(function(r){return ci(e,r)}):!1}function bs(e){return e===void 0&&(e=[]),e.reduce(function(t,r){return r.meta!==void 0&&(t[r.id]=r.meta),t},{})}function Ss(e){return new Set(zr.flatten(e.map(function(t){return t.tags})))}ie.getAdjList=Gt;ie.getAllChildren=ai;ie.getAllStateNodes=oi;ie.getChildren=bt;ie.getConfiguration=si;ie.getMeta=bs;ie.getTagsFromConfiguration=Ss;ie.getValue=_s;ie.has=fi;ie.isInFinalState=ci;ie.isLeafNode=kr;ie.nextEvents=ms});var wt=q($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});var Ke=de(),li=kt(),St=_e(),di=qr(),hi=He(),ws=Ie();function vi(e,t){if(e===t)return!0;if(e===void 0||t===void 0)return!1;if(St.isString(e)||St.isString(t))return e===t;var r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&r.every(function(i){return vi(e[i],t[i])})}function pi(e){return typeof e!="object"||e===null?!1:"value"in e&&"_event"in e}var Os=pi;function Ps(e,t){var r=e.exec,n=Ke.__assign(Ke.__assign({},e),{exec:r!==void 0?function(){return r(t.context,t.event,{action:e,state:t,_event:t._event})}:void 0});return n}var As=function(){function e(t){var r=this,n;this.actions=[],this.activities=li.EMPTY_ACTIVITY_MAP,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||li.EMPTY_ACTIVITY_MAP,this.meta=di.getMeta(t.configuration),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=(n=Array.isArray(t.tags)?new Set(t.tags):t.tags)!==null&&n!==void 0?n:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return di.nextEvents(r.configuration)}})}return e.from=function(t,r){if(t instanceof e)return t.context!==r?new e({value:t.value,context:r,_event:t._event,_sessionid:null,historyValue:t.historyValue,history:t.history,actions:[],activities:t.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):t;var n=hi.initEvent;return new e({value:t,context:r,_event:n,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},e.create=function(t){return new e(t)},e.inert=function(t,r){if(t instanceof e){if(!t.actions.length)return t;var n=hi.initEvent;return new e({value:t.value,context:r,_event:n,_sessionid:null,historyValue:t.historyValue,history:t.history,activities:t.activities,configuration:t.configuration,transitions:[],children:{}})}return e.from(t,r)},e.prototype.toStrings=function(t,r){var n=this;if(t===void 0&&(t=this.value),r===void 0&&(r="."),St.isString(t))return[t];var i=Object.keys(t);return i.concat.apply(i,Ke.__spreadArray([],Ke.__read(i.map(function(a){return n.toStrings(t[a],r).map(function(u){return a+r+u})})),!1))},e.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var r=t.tags;t.machine;var n=Ke.__rest(t,["configuration","transitions","tags","machine"]);return Ke.__assign(Ke.__assign({},n),{tags:Array.from(r)})},e.prototype.matches=function(t){return St.matchesState(t,this.value)},e.prototype.hasTag=function(t){return this.tags.has(t)},e.prototype.can=function(t){var r;ws.IS_PRODUCTION&&St.warn(!!this.machine,"state.can(...) used outside of a machine-created State object; this will always return false.");var n=(r=this.machine)===null||r===void 0?void 0:r.getTransitionData(this,t);return!!n?.transitions.length&&n.transitions.some(function(i){return i.target!==void 0||i.actions.length})},e}();$e.State=As;$e.bindActionToState=Ps;$e.isState=Os;$e.isStateConfig=pi;$e.stateValuesEqual=vi});var gi=q(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});var yi=de(),xs={deferEvents:!1},Es=function(){function e(t){this.processingEvent=!1,this.queue=[],this.initialized=!1,this.options=yi.__assign(yi.__assign({},xs),t)}return e.prototype.initialize=function(t){if(this.initialized=!0,t){if(!this.options.deferEvents){this.schedule(t);return}this.process(t)}this.flushEvents()},e.prototype.schedule=function(t){if(!this.initialized||this.processingEvent){this.queue.push(t);return}if(this.queue.length!==0)throw new Error("Event queue should be empty when it is not processing events");this.process(t),this.flushEvents()},e.prototype.clear=function(){this.queue=[]},e.prototype.flushEvents=function(){for(var t=this.queue.shift();t;)this.process(t),t=this.queue.shift()},e.prototype.process=function(t){this.processingEvent=!0;try{t()}catch(r){throw this.clear(),r}finally{this.processingEvent=!1}},e}();Lr.Scheduler=Es});var _i=q(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});var Ur=new Map,Ts=0,Is={bookId:function(){return"x:".concat(Ts++)},register:function(e,t){return Ur.set(e,t),e},get:function(e){return Ur.get(e)},free:function(e){Ur.delete(e)}};Vr.registry=Is});var mi=q(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});var js=Ie();function Xr(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;js.IS_PRODUCTION||console.warn("XState could not find a global object in this environment. Please let the maintainers know and raise an issue here: https://github.com/statelyai/xstate/issues")}function Ns(){var e=Xr();if(e&&"__xstate__"in e)return e.__xstate__}function Ds(e){if(Xr()){var t=Ns();t&&t.register(e)}}Jt.getGlobal=Xr;Jt.registerService=Ds});var Gr=q(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});var bi=He(),Ms=mt(),Rs=_e();function Cs(e,t){return{transition:e,initialState:t}}function Fs(e){var t={error:void 0,data:void 0,status:"pending"};return{transition:function(r,n,i){var a=i.parent,u=i.id,f=i.observers;switch(n.type){case"fulfill":return a?.send(bi.doneInvoke(u,n.data)),{error:void 0,data:n.data,status:"fulfilled"};case"reject":return a?.send(bi.error(u,n.error)),f.forEach(function(c){c.error(n.error)}),{error:n.error,data:void 0,status:"rejected"};default:return r}},initialState:t,start:function(r){var n=r.self;return e().then(function(i){n.send({type:"fulfill",data:i})},function(i){n.send({type:"reject",error:i})}),t}}}function zs(e,t){t===void 0&&(t={});var r=e.initialState,n=new Set,i=[],a=!1,u=function(){if(!a){for(a=!0;i.length>0;){var o=i.shift();r=e.transition(r,o,c),n.forEach(function(s){return s.next(r)})}a=!1}},f=Ms.toActorRef({id:t.id,send:function(o){i.push(o),u()},getSnapshot:function(){return r},subscribe:function(o,s,d){var l=Rs.toObserver(o,s,d);return n.add(l),l.next(r),{unsubscribe:function(){n.delete(l)}}}}),c={parent:t.parent,self:f,id:t.id||"anonymous",observers:n};return r=e.start?e.start(c):r,f}Ot.fromPromise=Fs;Ot.fromReducer=Cs;Ot.spawnBehavior=zs});var Ai=q(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});var N=de(),Jr=We(),Wt=wt(),we=Be(),ue=He(),Ne=Ie(),P=_e(),Si=gi(),Wr=mt(),Pt=_i(),wi=mi(),Ze=Cr(),ks=Gr(),Kr={sync:!1,autoForward:!1};U.InterpreterStatus=void 0;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(U.InterpreterStatus||(U.InterpreterStatus={}));var Oi=function(){function e(t,r){r===void 0&&(r=e.defaultOptions);var n=this;this.machine=t,this.delayedEventsMap={},this.listeners=new Set,this.contextListeners=new Set,this.stopListeners=new Set,this.doneListeners=new Set,this.eventListeners=new Set,this.sendListeners=new Set,this.initialized=!1,this.status=U.InterpreterStatus.NotStarted,this.children=new Map,this.forwardTo=new Set,this._outgoingQueue=[],this.init=this.start,this.send=function(s,d){if(P.isArray(s))return n.batch(s),n.state;var l=P.toSCXMLEvent(P.toEventObject(s,d));if(n.status===U.InterpreterStatus.Stopped)return Ne.IS_PRODUCTION||P.warn(!1,'Event "'.concat(l.name,'" was sent to stopped service "').concat(n.machine.id,`". This service has already reached its final state, and will not transition.
Event: `).concat(JSON.stringify(l.data))),n.state;if(n.status!==U.InterpreterStatus.Running&&!n.options.deferEvents)throw new Error('Event "'.concat(l.name,'" was sent to uninitialized service "').concat(n.machine.id,`". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.
Event: `).concat(JSON.stringify(l.data)));return n.scheduler.schedule(function(){n.forward(l);var h=n._nextState(l);n.update(h,l)}),n._state},this.sendTo=function(s,d,l){var h=n.parent&&(d===Jr.SpecialTargets.Parent||n.parent.id===d),v=h?n.parent:P.isString(d)?d===Jr.SpecialTargets.Internal?n:n.children.get(d)||Pt.registry.get(d):P.isActor(d)?d:void 0;if(!v){if(!h)throw new Error("Unable to send event to child '".concat(d,"' from service '").concat(n.id,"'."));Ne.IS_PRODUCTION||P.warn(!1,"Service '".concat(n.id,"' has no parent: unable to send event ").concat(s.type));return}if("machine"in v){if(n.status!==U.InterpreterStatus.Stopped||n.parent!==v||n.state.done){var p=N.__assign(N.__assign({},s),{name:s.name===we.error?"".concat(ue.error(n.id)):s.name,origin:n.sessionId});!l&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([v,p]):v.send(p)}}else!l&&n.machine.config.predictableActionArguments?n._outgoingQueue.push([v,s.data]):v.send(s.data)},this._exec=function(s,d,l,h){h===void 0&&(h=n.machine.options.actions);var v=s.exec||ue.getActionFunction(s.type,h),p=P.isFunction(v)?v:v?v.exec:s.exec;if(p)try{return p(d,l.data,n.machine.config.predictableActionArguments?{action:s,_event:l}:{action:s,state:n.state,_event:l})}catch(se){throw n.parent&&n.parent.send({type:"xstate.error",data:se}),se}switch(s.type){case we.raise:{var y=s;n.defer(y);break}case we.send:var g=s;if(typeof g.delay=="number"){n.defer(g);return}else g.to?n.sendTo(g._event,g.to,l===ue.initEvent):n.send(g._event);break;case we.cancel:n.cancel(s.sendId);break;case we.start:{if(n.status!==U.InterpreterStatus.Running)return;var _=s.activity;if(!n.machine.config.predictableActionArguments&&!n.state.activities[_.id||_.type])break;if(_.type===Jr.ActionTypes.Invoke){var m=P.toInvokeSource(_.src),w=n.machine.options.services?n.machine.options.services[m.type]:void 0,O=_.id,A=_.data;Ne.IS_PRODUCTION||P.warn(!("forward"in _),"`forward` property is deprecated (found in invocation of '".concat(_.src,"' in in machine '").concat(n.machine.id,"'). ")+"Please use `autoForward` instead.");var D="autoForward"in _?_.autoForward:!!_.forward;if(!w){Ne.IS_PRODUCTION||P.warn(!1,"No service found for invocation '".concat(_.src,"' in machine '").concat(n.machine.id,"'."));return}var k=A?P.mapContext(A,d,l):void 0;if(typeof w=="string")return;var M=P.isFunction(w)?w(d,l.data,{data:k,src:m,meta:_.meta}):w;if(!M)return;var W=void 0;P.isMachine(M)&&(M=k?M.withContext(k):M,W={autoForward:D}),n.spawn(M,O,W)}else n.spawnActivity(_);break}case we.stop:{n.stopChild(s.activity.id);break}case we.log:var I=s,L=I.label,B=I.value;L?n.logger(L,B):n.logger(B);break;default:Ne.IS_PRODUCTION||P.warn(!1,"No implementation found for action type '".concat(s.type,"'"));break}};var i=N.__assign(N.__assign({},e.defaultOptions),r),a=i.clock,u=i.logger,f=i.parent,c=i.id,o=c!==void 0?c:t.id;this.id=o,this.logger=u,this.clock=a,this.parent=f,this.options=i,this.scheduler=new Si.Scheduler({deferEvents:this.options.deferEvents}),this.sessionId=Pt.registry.bookId()}return Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this;return this._initialState?this._initialState:Ze.provide(this,function(){return t._initialState=t.machine.initialState,t._initialState})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return Ne.IS_PRODUCTION||P.warn(this.status!==U.InterpreterStatus.NotStarted,"Attempted to read state from uninitialized service '".concat(this.id,"'. Make sure the service is started first.")),this._state},enumerable:!1,configurable:!0}),e.prototype.execute=function(t,r){var n,i;try{for(var a=N.__values(t.actions),u=a.next();!u.done;u=a.next()){var f=u.value;this.exec(f,t,r)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},e.prototype.update=function(t,r){var n,i,a,u,f,c,o,s,d=this;if(t._sessionid=this.sessionId,this._state=t,(!this.machine.config.predictableActionArguments||r===ue.initEvent)&&this.options.execute)this.execute(this.state);else for(var l=void 0;l=this._outgoingQueue.shift();)l[0].send(l[1]);if(this.children.forEach(function(M){d.state.children[M.id]=M}),this.devTools&&this.devTools.send(r.data,t),t.event)try{for(var h=N.__values(this.eventListeners),v=h.next();!v.done;v=h.next()){var p=v.value;p(t.event)}}catch(M){n={error:M}}finally{try{v&&!v.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}try{for(var y=N.__values(this.listeners),g=y.next();!g.done;g=y.next()){var p=g.value;p(t,t.event)}}catch(M){a={error:M}}finally{try{g&&!g.done&&(u=y.return)&&u.call(y)}finally{if(a)throw a.error}}try{for(var _=N.__values(this.contextListeners),m=_.next();!m.done;m=_.next()){var w=m.value;w(this.state.context,this.state.history?this.state.history.context:void 0)}}catch(M){f={error:M}}finally{try{m&&!m.done&&(c=_.return)&&c.call(_)}finally{if(f)throw f.error}}if(this.state.done){var O=t.configuration.find(function(M){return M.type==="final"&&M.parent===d.machine}),A=O&&O.doneData?P.mapContext(O.doneData,t.context,r):void 0;this._doneEvent=ue.doneInvoke(this.id,A);try{for(var D=N.__values(this.doneListeners),k=D.next();!k.done;k=D.next()){var p=k.value;p(this._doneEvent)}}catch(M){o={error:M}}finally{try{k&&!k.done&&(s=D.return)&&s.call(D)}finally{if(o)throw o.error}}this._stop(),this._stopChildren(),Pt.registry.free(this.sessionId)}},e.prototype.onTransition=function(t){return this.listeners.add(t),this.status===U.InterpreterStatus.Running&&t(this.state,this.state.event),this},e.prototype.subscribe=function(t,r,n){var i=this,a=P.toObserver(t,r,n);this.listeners.add(a.next),this.status!==U.InterpreterStatus.NotStarted&&a.next(this.state);var u=function(){i.doneListeners.delete(u),i.stopListeners.delete(u),a.complete()};return this.status===U.InterpreterStatus.Stopped?a.complete():(this.onDone(u),this.onStop(u)),{unsubscribe:function(){i.listeners.delete(a.next),i.doneListeners.delete(u),i.stopListeners.delete(u)}}},e.prototype.onEvent=function(t){return this.eventListeners.add(t),this},e.prototype.onSend=function(t){return this.sendListeners.add(t),this},e.prototype.onChange=function(t){return this.contextListeners.add(t),this},e.prototype.onStop=function(t){return this.stopListeners.add(t),this},e.prototype.onDone=function(t){return this.status===U.InterpreterStatus.Stopped&&this._doneEvent?t(this._doneEvent):this.doneListeners.add(t),this},e.prototype.off=function(t){return this.listeners.delete(t),this.eventListeners.delete(t),this.sendListeners.delete(t),this.stopListeners.delete(t),this.doneListeners.delete(t),this.contextListeners.delete(t),this},e.prototype.start=function(t){var r=this;if(this.status===U.InterpreterStatus.Running)return this;this.machine._init(),Pt.registry.register(this.sessionId,this),this.initialized=!0,this.status=U.InterpreterStatus.Running;var n=t===void 0?this.initialState:Ze.provide(this,function(){return Wt.isStateConfig(t)?r.machine.resolveState(t):r.machine.resolveState(Wt.State.from(t,r.machine.context))});return this.options.devTools&&this.attachDev(),this.scheduler.initialize(function(){r.update(n,ue.initEvent)}),this},e.prototype._stopChildren=function(){this.children.forEach(function(t){P.isFunction(t.stop)&&t.stop()}),this.children.clear()},e.prototype._stop=function(){var t,r,n,i,a,u,f,c,o,s;try{for(var d=N.__values(this.listeners),l=d.next();!l.done;l=d.next()){var h=l.value;this.listeners.delete(h)}}catch(D){t={error:D}}finally{try{l&&!l.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}try{for(var v=N.__values(this.stopListeners),p=v.next();!p.done;p=v.next()){var h=p.value;h(),this.stopListeners.delete(h)}}catch(D){n={error:D}}finally{try{p&&!p.done&&(i=v.return)&&i.call(v)}finally{if(n)throw n.error}}try{for(var y=N.__values(this.contextListeners),g=y.next();!g.done;g=y.next()){var h=g.value;this.contextListeners.delete(h)}}catch(D){a={error:D}}finally{try{g&&!g.done&&(u=y.return)&&u.call(y)}finally{if(a)throw a.error}}try{for(var _=N.__values(this.doneListeners),m=_.next();!m.done;m=_.next()){var h=m.value;this.doneListeners.delete(h)}}catch(D){f={error:D}}finally{try{m&&!m.done&&(c=_.return)&&c.call(_)}finally{if(f)throw f.error}}if(!this.initialized)return this;this.initialized=!1,this.status=U.InterpreterStatus.Stopped,this._initialState=void 0;try{for(var w=N.__values(Object.keys(this.delayedEventsMap)),O=w.next();!O.done;O=w.next()){var A=O.value;this.clock.clearTimeout(this.delayedEventsMap[A])}}catch(D){o={error:D}}finally{try{O&&!O.done&&(s=w.return)&&s.call(w)}finally{if(o)throw o.error}}this.scheduler.clear(),this.scheduler=new Si.Scheduler({deferEvents:this.options.deferEvents})},e.prototype.stop=function(){var t=this,r=this.scheduler;return this._stop(),r.schedule(function(){var n=P.toSCXMLEvent({type:"xstate.stop"}),i=Ze.provide(t,function(){var a=P.flatten(N.__spreadArray([],N.__read(t.state.configuration),!1).sort(function(s,d){return d.order-s.order}).map(function(s){return ue.toActionObjects(s.onExit,t.machine.options.actions)})),u=N.__read(ue.resolveActions(t.machine,t.state,t.state.context,n,[{type:"exit",actions:a}],t.machine.config.predictableActionArguments?t._exec:void 0,t.machine.config.predictableActionArguments||t.machine.config.preserveActionOrder),2),f=u[0],c=u[1],o=new Wt.State({value:t.state.value,context:c,_event:n,_sessionid:t.sessionId,historyValue:void 0,history:t.state,actions:f.filter(function(s){return!P.isRaisableAction(s)}),activities:{},events:[],configuration:[],transitions:[],children:{},done:t.state.done,tags:t.state.tags,machine:t.machine});return o.changed=!0,o});t.update(i,n),t._stopChildren(),Pt.registry.free(t.sessionId)}),this},e.prototype.batch=function(t){var r=this;if(this.status===U.InterpreterStatus.NotStarted&&this.options.deferEvents)Ne.IS_PRODUCTION||P.warn(!1,"".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,`" and are deferred. Make sure .start() is called for this service.
Event: `).concat(JSON.stringify(event)));else if(this.status!==U.InterpreterStatus.Running)throw new Error("".concat(t.length,' event(s) were sent to uninitialized service "').concat(this.machine.id,'". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.'));if(t.length){var n=!!this.machine.config.predictableActionArguments&&this._exec;this.scheduler.schedule(function(){var i,a,u=r.state,f=!1,c=[],o=function(h){var v=P.toSCXMLEvent(h);r.forward(v),u=Ze.provide(r,function(){return r.machine.transition(u,v,void 0,n||void 0)}),c.push.apply(c,N.__spreadArray([],N.__read(r.machine.config.predictableActionArguments?u.actions:u.actions.map(function(p){return Wt.bindActionToState(p,u)})),!1)),f=f||!!u.changed};try{for(var s=N.__values(t),d=s.next();!d.done;d=s.next()){var l=d.value;o(l)}}catch(h){i={error:h}}finally{try{d&&!d.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}u.changed=f,u.actions=c,r.update(u,P.toSCXMLEvent(t[t.length-1]))})}},e.prototype.sender=function(t){return this.send.bind(this,t)},e.prototype._nextState=function(t,r){var n=this;r===void 0&&(r=!!this.machine.config.predictableActionArguments&&this._exec);var i=P.toSCXMLEvent(t);if(i.name.indexOf(we.errorPlatform)===0&&!this.state.nextEvents.some(function(u){return u.indexOf(we.errorPlatform)===0}))throw i.data.data;var a=Ze.provide(this,function(){return n.machine.transition(n.state,i,void 0,r||void 0)});return a},e.prototype.nextState=function(t){return this._nextState(t,!1)},e.prototype.forward=function(t){var r,n;try{for(var i=N.__values(this.forwardTo),a=i.next();!a.done;a=i.next()){var u=a.value,f=this.children.get(u);if(!f)throw new Error("Unable to forward event '".concat(t,"' from interpreter '").concat(this.id,"' to nonexistant child '").concat(u,"'."));f.send(t)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.defer=function(t){var r=this,n=this.clock.setTimeout(function(){"to"in t&&t.to?r.sendTo(t._event,t.to,!0):r.send(t._event)},t.delay);t.id&&(this.delayedEventsMap[t.id]=n)},e.prototype.cancel=function(t){this.clock.clearTimeout(this.delayedEventsMap[t]),delete this.delayedEventsMap[t]},e.prototype.exec=function(t,r,n){n===void 0&&(n=this.machine.options.actions),this._exec(t,r.context,r._event,n)},e.prototype.removeChild=function(t){var r;this.children.delete(t),this.forwardTo.delete(t),(r=this.state)===null||r===void 0||delete r.children[t]},e.prototype.stopChild=function(t){var r=this.children.get(t);r&&(this.removeChild(t),P.isFunction(r.stop)&&r.stop())},e.prototype.spawn=function(t,r,n){if(this.status!==U.InterpreterStatus.Running)return Wr.createDeferredActor(t,r);if(P.isPromiseLike(t))return this.spawnPromise(Promise.resolve(t),r);if(P.isFunction(t))return this.spawnCallback(t,r);if(Wr.isSpawnedActor(t))return this.spawnActor(t,r);if(P.isObservable(t))return this.spawnObservable(t,r);if(P.isMachine(t))return this.spawnMachine(t,N.__assign(N.__assign({},n),{id:r}));if(P.isBehavior(t))return this.spawnBehavior(t,r);throw new Error('Unable to spawn entity "'.concat(r,'" of type "').concat(typeof t,'".'))},e.prototype.spawnMachine=function(t,r){var n=this;r===void 0&&(r={});var i=new e(t,N.__assign(N.__assign({},this.options),{parent:this,id:r.id||t.id})),a=N.__assign(N.__assign({},Kr),r);a.sync&&i.onTransition(function(f){n.send(we.update,{state:f,id:i.id})});var u=i;return this.children.set(i.id,u),a.autoForward&&this.forwardTo.add(i.id),i.onDone(function(f){n.removeChild(i.id),n.send(P.toSCXMLEvent(f,{origin:i.id}))}).start(),u},e.prototype.spawnBehavior=function(t,r){var n=ks.spawnBehavior(t,{id:r,parent:this});return this.children.set(r,n),n},e.prototype.spawnPromise=function(t,r){var n,i=this,a=!1,u;t.then(function(c){a||(u=c,i.removeChild(r),i.send(P.toSCXMLEvent(ue.doneInvoke(r,c),{origin:r})))},function(c){if(!a){i.removeChild(r);var o=ue.error(r,c);try{i.send(P.toSCXMLEvent(o,{origin:r}))}catch(s){P.reportUnhandledExceptionOnInvocation(c,s,r),i.devTools&&i.devTools.send(o,i.state),i.machine.strict&&i.stop()}}});var f=(n={id:r,send:function(){},subscribe:function(c,o,s){var d=P.toObserver(c,o,s),l=!1;return t.then(function(h){l||(d.next(h),!l&&d.complete())},function(h){l||d.error(h)}),{unsubscribe:function(){return l=!0}}},stop:function(){a=!0},toJSON:function(){return{id:r}},getSnapshot:function(){return u}},n[P.symbolObservable]=function(){return this},n);return this.children.set(r,f),f},e.prototype.spawnCallback=function(t,r){var n,i=this,a=!1,u=new Set,f=new Set,c,o=function(l){c=l,f.forEach(function(h){return h(l)}),!a&&i.send(P.toSCXMLEvent(l,{origin:r}))},s;try{s=t(o,function(l){u.add(l)})}catch(l){this.send(ue.error(r,l))}if(P.isPromiseLike(s))return this.spawnPromise(s,r);var d=(n={id:r,send:function(l){return u.forEach(function(h){return h(l)})},subscribe:function(l){var h=P.toObserver(l);return f.add(h.next),{unsubscribe:function(){f.delete(h.next)}}},stop:function(){a=!0,P.isFunction(s)&&s()},toJSON:function(){return{id:r}},getSnapshot:function(){return c}},n[P.symbolObservable]=function(){return this},n);return this.children.set(r,d),d},e.prototype.spawnObservable=function(t,r){var n,i=this,a,u=t.subscribe(function(c){a=c,i.send(P.toSCXMLEvent(c,{origin:r}))},function(c){i.removeChild(r),i.send(P.toSCXMLEvent(ue.error(r,c),{origin:r}))},function(){i.removeChild(r),i.send(P.toSCXMLEvent(ue.doneInvoke(r),{origin:r}))}),f=(n={id:r,send:function(){},subscribe:function(c,o,s){return t.subscribe(c,o,s)},stop:function(){return u.unsubscribe()},getSnapshot:function(){return a},toJSON:function(){return{id:r}}},n[P.symbolObservable]=function(){return this},n);return this.children.set(r,f),f},e.prototype.spawnActor=function(t,r){return this.children.set(r,t),t},e.prototype.spawnActivity=function(t){var r=this.machine.options&&this.machine.options.activities?this.machine.options.activities[t.type]:void 0;if(!r){Ne.IS_PRODUCTION||P.warn(!1,"No implementation found for activity '".concat(t.type,"'"));return}var n=r(this.state.context,t);this.spawnEffect(t.id,n)},e.prototype.spawnEffect=function(t,r){var n;this.children.set(t,(n={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},stop:r||void 0,getSnapshot:function(){},toJSON:function(){return{id:t}}},n[P.symbolObservable]=function(){return this},n))},e.prototype.attachDev=function(){var t=wi.getGlobal();if(this.options.devTools&&t){if(t.__REDUX_DEVTOOLS_EXTENSION__){var r=typeof this.options.devTools=="object"?this.options.devTools:void 0;this.devTools=t.__REDUX_DEVTOOLS_EXTENSION__.connect(N.__assign(N.__assign({name:this.id,autoPause:!0,stateSanitizer:function(n){return{value:n.value,context:n.context,actions:n.actions}}},r),{features:N.__assign({jump:!1,skip:!1},r?r.features:void 0)}),this.machine),this.devTools.init(this.state)}wi.registerService(this)}},e.prototype.toJSON=function(){return{id:this.id}},e.prototype[P.symbolObservable]=function(){return this},e.prototype.getSnapshot=function(){return this.status===U.InterpreterStatus.NotStarted?this.initialState:this._state},e.defaultOptions={execute:!0,deferEvents:!0,clock:{setTimeout:function(t,r){return setTimeout(t,r)},clearTimeout:function(t){return clearTimeout(t)}},logger:console.log.bind(console),devTools:!1},e.interpret=Pi,e}(),qs=function(e){return P.isString(e)?N.__assign(N.__assign({},Kr),{name:e}):N.__assign(N.__assign(N.__assign({},Kr),{name:P.uniqueId()}),e)};function Ls(e,t){var r=qs(t);return Ze.consume(function(n){if(!Ne.IS_PRODUCTION){var i=P.isMachine(e)||P.isFunction(e);P.warn(!!n||i,'Attempted to spawn an Actor (ID: "'.concat(P.isMachine(e)?e.id:"undefined",'") outside of a service. This will have no effect.'))}return n?n.spawn(e,r.name,r):Wr.createDeferredActor(e,r.name)})}function Pi(e,t){var r=new Oi(e,t);return r}U.Interpreter=Oi;U.interpret=Pi;U.spawn=Ls});var Ti=q(Kt=>{"use strict";Object.defineProperty(Kt,"__esModule",{value:!0});var At=de();We();var xi=Be();_e();Ie();function Ei(e){if(typeof e=="string"){var t={type:e};return t.toString=function(){return e},t}return e}function Us(e){return At.__assign(At.__assign({type:xi.invoke},e),{toJSON:function(){e.onDone,e.onError;var t=At.__rest(e,["onDone","onError"]);return At.__assign(At.__assign({},t),{type:xi.invoke,src:Ei(e.src)})}})}Kt.toInvokeDefinition=Us;Kt.toInvokeSource=Ei});var Br=q(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});var S=de(),b=_e(),De=wt(),et=Be(),J=He(),tt=Ie(),Vs=kt(),$=qr(),Xs=mt(),$t=Ti(),it="",$r="#",xt="*",rt={},nt=function(e){return e[0]===$r},Gs=function(){return{actions:{},guards:{},services:{},activities:{},delays:{}}},Js=function(e,t,r){var n=r.slice(0,-1).some(function(a){return!("cond"in a)&&!("in"in a)&&(b.isString(a.target)||b.isMachine(a.target))}),i=t===it?"the transient event":"event '".concat(t,"'");b.warn(!n,"One or more transitions for ".concat(i," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined.")},Ws=function(){function e(t,r,n,i){n===void 0&&(n="context"in t?t.context:void 0);var a=this,u;this.config=t,this._context=n,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign(Gs(),r),this.parent=i?.parent,this.key=this.config.key||i?.key||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:Vs.STATE_DELIMITER),this.id=this.config.id||S.__spreadArray([this.machine.key],S.__read(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:(u=this.config.schema)!==null&&u!==void 0?u:{},this.description=this.config.description,tt.IS_PRODUCTION||b.warn(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?b.mapValues(this.config.states,function(o,s){var d,l=new e(o,{},void 0,{parent:a,key:s});return Object.assign(a.idMap,S.__assign((d={},d[l.id]=l,d),l.idMap)),l}):rt;var f=0;function c(o){var s,d;o.order=f++;try{for(var l=S.__values($.getAllChildren(o)),h=l.next();!h.done;h=l.next()){var v=h.value;c(v)}}catch(p){s={error:p}}finally{try{h&&!h.done&&(d=l.return)&&d.call(l)}finally{if(s)throw s.error}}}c(this),this.history=this.config.history===!0?"shallow":this.config.history||!1,this._transient=!!this.config.always||(this.config.on?Array.isArray(this.config.on)?this.config.on.some(function(o){var s=o.event;return s===it}):it in this.config.on:!1),this.strict=!!this.config.strict,this.onEntry=b.toArray(this.config.entry||this.config.onEntry).map(function(o){return J.toActionObject(o)}),this.onExit=b.toArray(this.config.exit||this.config.onExit).map(function(o){return J.toActionObject(o)}),this.meta=this.config.meta,this.doneData=this.type==="final"?this.config.data:void 0,this.invoke=b.toArray(this.config.invoke).map(function(o,s){var d,l;if(b.isMachine(o)){var h=b.createInvokeId(a.id,s);return a.machine.options.services=S.__assign((d={},d[h]=o,d),a.machine.options.services),$t.toInvokeDefinition({src:h,id:h})}else if(b.isString(o.src)){var h=o.id||b.createInvokeId(a.id,s);return $t.toInvokeDefinition(S.__assign(S.__assign({},o),{id:h,src:o.src}))}else if(b.isMachine(o.src)||b.isFunction(o.src)){var h=o.id||b.createInvokeId(a.id,s);return a.machine.options.services=S.__assign((l={},l[h]=o.src,l),a.machine.options.services),$t.toInvokeDefinition(S.__assign(S.__assign({id:h},o),{src:h}))}else{var v=o.src;return $t.toInvokeDefinition(S.__assign(S.__assign({id:b.createInvokeId(a.id,s)},o),{src:v}))}}),this.activities=b.toArray(this.config.activities).concat(this.invoke).map(function(o){return J.toActivityDefinition(o)}),this.transition=this.transition.bind(this),this.tags=b.toArray(this.config.tags)}return e.prototype._init=function(){this.__cache.transitions||$.getAllStateNodes(this).forEach(function(t){return t.on})},e.prototype.withConfig=function(t,r){var n=this.options,i=n.actions,a=n.activities,u=n.guards,f=n.services,c=n.delays;return new e(this.config,{actions:S.__assign(S.__assign({},i),t.actions),activities:S.__assign(S.__assign({},a),t.activities),guards:S.__assign(S.__assign({},u),t.guards),services:S.__assign(S.__assign({},f),t.services),delays:S.__assign(S.__assign({},c),t.delays)},r??this.context)},e.prototype.withContext=function(t){return new e(this.config,this.options,t)},Object.defineProperty(e.prototype,"context",{get:function(){return b.isFunction(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:b.mapValues(this.states,function(t){return t.definition}),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),e.prototype.toJSON=function(){return this.definition},Object.defineProperty(e.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce(function(r,n){return r[n.eventType]=r[n.eventType]||[],r[n.eventType].push(n),r},{})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),e.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var r=t===it,n=this.transitions.filter(function(i){var a=i.eventType===t;return r?a:a||i.eventType===xt});return this.__cache.candidates[t]=n,n},e.prototype.getDelayedTransitions=function(){var t=this,r=this.config.after;if(!r)return[];var n=function(a,u){var f=b.isFunction(a)?"".concat(t.id,":delay[").concat(u,"]"):a,c=J.after(f,t.id);return t.onEntry.push(J.send(c,{delay:a})),t.onExit.push(J.cancel(c)),c},i=b.isArray(r)?r.map(function(a,u){var f=n(a.delay,u);return S.__assign(S.__assign({},a),{event:f})}):b.flatten(Object.keys(r).map(function(a,u){var f=r[a],c=b.isString(f)?{target:f}:f,o=isNaN(+a)?a:+a,s=n(o,u);return b.toArray(c).map(function(d){return S.__assign(S.__assign({},d),{event:s,delay:o})})}));return i.map(function(a){var u=a.delay;return S.__assign(S.__assign({},t.formatTransition(a)),{delay:u})})},e.prototype.getStateNodes=function(t){var r,n=this;if(!t)return[];var i=t instanceof De.State?t.value:b.toStateValue(t,this.delimiter);if(b.isString(i)){var a=this.getStateNode(i).initial;return a!==void 0?this.getStateNodes((r={},r[i]=a,r)):[this,this.states[i]]}var u=Object.keys(i),f=[this];return f.push.apply(f,S.__spreadArray([],S.__read(b.flatten(u.map(function(c){return n.getStateNode(c).getStateNodes(i[c])}))),!1)),f},e.prototype.handles=function(t){var r=b.getEventType(t);return this.events.includes(r)},e.prototype.resolveState=function(t){var r=t instanceof De.State?t:De.State.create(t),n=Array.from($.getConfiguration([],this.getStateNodes(r.value)));return new De.State(S.__assign(S.__assign({},r),{value:this.resolve(r.value),configuration:n,done:$.isInFinalState(n,this),tags:$.getTagsFromConfiguration(n),machine:this.machine}))},e.prototype.transitionLeafNode=function(t,r,n){var i=this.getStateNode(t),a=i.next(r,n);return!a||!a.transitions.length?this.next(r,n):a},e.prototype.transitionCompoundNode=function(t,r,n){var i=Object.keys(t),a=this.getStateNode(i[0]),u=a._transition(t[i[0]],r,n);return!u||!u.transitions.length?this.next(r,n):u},e.prototype.transitionParallelNode=function(t,r,n){var i,a,u={};try{for(var f=S.__values(Object.keys(t)),c=f.next();!c.done;c=f.next()){var o=c.value,s=t[o];if(s){var d=this.getStateNode(o),l=d._transition(s,r,n);l&&(u[o]=l)}}}catch(g){i={error:g}}finally{try{c&&!c.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var h=Object.keys(u).map(function(g){return u[g]}),v=b.flatten(h.map(function(g){return g.transitions})),p=h.some(function(g){return g.transitions.length>0});if(!p)return this.next(r,n);var y=b.flatten(Object.keys(u).map(function(g){return u[g].configuration}));return{transitions:v,exitSet:b.flatten(h.map(function(g){return g.exitSet})),configuration:y,source:r,actions:b.flatten(Object.keys(u).map(function(g){return u[g].actions}))}},e.prototype._transition=function(t,r,n){return b.isString(t)?this.transitionLeafNode(t,r,n):Object.keys(t).length===1?this.transitionCompoundNode(t,r,n):this.transitionParallelNode(t,r,n)},e.prototype.getTransitionData=function(t,r){return this._transition(t.value,t,b.toSCXMLEvent(r))},e.prototype.next=function(t,r){var n,i,a=this,u=r.name,f=[],c=[],o;try{for(var s=S.__values(this.getCandidates(u)),d=s.next();!d.done;d=s.next()){var l=d.value,h=l.cond,v=l.in,p=t.context,y=v?b.isString(v)&&nt(v)?t.matches(b.toStateValue(this.getStateNodeById(v).path,this.delimiter)):b.matchesState(b.toStateValue(v,this.delimiter),b.path(this.path.slice(0,-2))(t.value)):!0,g=!1;try{g=!h||b.evaluateGuard(this.machine,h,p,r,t)}catch(w){throw new Error("Unable to evaluate guard '".concat(h.name||h.type,"' in transition for event '").concat(u,"' in state node '").concat(this.id,`':
`).concat(w.message))}if(g&&y){l.target!==void 0&&(c=l.target),f.push.apply(f,S.__spreadArray([],S.__read(l.actions),!1)),o=l;break}}}catch(w){n={error:w}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}if(o){if(!c.length)return{transitions:[o],exitSet:[],configuration:t.value?[this]:[],source:t,actions:f};var _=b.flatten(c.map(function(w){return a.getRelativeStateNodes(w,t.historyValue)})),m=!!o.internal;return{transitions:[o],exitSet:m?[]:b.flatten(c.map(function(w){return a.getPotentiallyReenteringNodes(w)})),configuration:_,source:t,actions:f}}},e.prototype.getPotentiallyReenteringNodes=function(t){if(this.order<t.order)return[this];for(var r=[],n=this,i=t;n&&n!==i;)r.push(n),n=n.parent;return n!==i?[]:(r.push(i),r)},e.prototype.getActions=function(t,r,n,i,a,u,f){var c,o,s,d,l=this,h=u?$.getConfiguration([],this.getStateNodes(u.value)):[],v=new Set;try{for(var p=S.__values(Array.from(t).sort(function(I,L){return I.order-L.order})),y=p.next();!y.done;y=p.next()){var g=y.value;(!$.has(h,g)||$.has(n.exitSet,g)||g.parent&&v.has(g.parent))&&v.add(g)}}catch(I){c={error:I}}finally{try{y&&!y.done&&(o=p.return)&&o.call(p)}finally{if(c)throw c.error}}try{for(var _=S.__values(h),m=_.next();!m.done;m=_.next()){var g=m.value;(!$.has(t,g)||$.has(n.exitSet,g.parent))&&n.exitSet.push(g)}}catch(I){s={error:I}}finally{try{m&&!m.done&&(d=_.return)&&d.call(_)}finally{if(s)throw s.error}}n.exitSet.sort(function(I,L){return L.order-I.order});var w=Array.from(v).sort(function(I,L){return I.order-L.order}),O=new Set(n.exitSet),A=b.flatten(w.map(function(I){var L=[];if(I.type!=="final")return L;var B=I.parent;if(!B.parent)return L;L.push(J.done(I.id,I.doneData),J.done(B.id,I.doneData?b.mapContext(I.doneData,i,a):void 0));var se=B.parent;return se.type==="parallel"&&$.getChildren(se).every(function(pt){return $.isInFinalState(n.configuration,pt)})&&L.push(J.done(se.id)),L})),D=w.map(function(I){var L=I.onEntry,B=I.activities.map(function(se){return J.start(se)});return{type:"entry",actions:J.toActionObjects(f?S.__spreadArray(S.__spreadArray([],S.__read(L),!1),S.__read(B),!1):S.__spreadArray(S.__spreadArray([],S.__read(B),!1),S.__read(L),!1),l.machine.options.actions)}}).concat({type:"state_done",actions:A.map(function(I){return J.raise(I)})}),k=Array.from(O).map(function(I){return{type:"exit",actions:J.toActionObjects(S.__spreadArray(S.__spreadArray([],S.__read(I.onExit),!1),S.__read(I.activities.map(function(L){return J.stop(L)})),!1),l.machine.options.actions)}}),M=k.concat({type:"transition",actions:J.toActionObjects(n.actions,this.machine.options.actions)}).concat(D);if(r){var W=J.toActionObjects(b.flatten(S.__spreadArray([],S.__read(t),!1).sort(function(I,L){return L.order-I.order}).map(function(I){return I.onExit})),this.machine.options.actions).filter(function(I){return!b.isRaisableAction(I)});return M.concat({type:"stop",actions:W})}return M},e.prototype.transition=function(t,r,n,i){t===void 0&&(t=this.initialState);var a=b.toSCXMLEvent(r),u;if(t instanceof De.State)u=n===void 0?t:this.resolveState(De.State.from(t,n));else{var f=b.isString(t)?this.resolve(b.pathToStateValue(this.getResolvedPath(t))):this.resolve(t),c=n??this.machine.context;u=this.resolveState(De.State.from(f,c))}if(!tt.IS_PRODUCTION&&a.name===xt)throw new Error("An event cannot have the wildcard type ('".concat(xt,"')"));if(this.strict&&!this.events.includes(a.name)&&!b.isBuiltInEvent(a.name))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var o=this._transition(u.value,u,a)||{transitions:[],configuration:[],exitSet:[],source:u,actions:[]},s=$.getConfiguration([],this.getStateNodes(u.value)),d=o.configuration.length?$.getConfiguration(s,o.configuration):s;return o.configuration=S.__spreadArray([],S.__read(d),!1),this.resolveTransition(o,u,u.context,i,a)},e.prototype.resolveRaisedTransition=function(t,r,n,i){var a,u=t.actions;return t=this.transition(t,r,void 0,i),t._event=n,t.event=n.data,(a=t.actions).unshift.apply(a,S.__spreadArray([],S.__read(u),!1)),t},e.prototype.resolveTransition=function(t,r,n,i,a){var u,f,c,o,s=this;a===void 0&&(a=J.initEvent);var d=t.configuration,l=!r||t.transitions.length>0,h=l?t.configuration:r?r.configuration:[],v=$.isInFinalState(h,this),p=l?$.getValue(this.machine,d):void 0,y=r?r.historyValue?r.historyValue:t.source?this.machine.historyValue(r.value):void 0:void 0,g=this.getActions(new Set(h),v,t,n,a,r,i),_=r?S.__assign({},r.activities):{};try{for(var m=S.__values(g),w=m.next();!w.done;w=m.next()){var O=w.value;try{for(var A=(c=void 0,S.__values(O.actions)),D=A.next();!D.done;D=A.next()){var k=D.value;k.type===et.start?_[k.activity.id||k.activity.type]=k:k.type===et.stop&&(_[k.activity.id||k.activity.type]=!1)}}catch(ye){c={error:ye}}finally{try{D&&!D.done&&(o=A.return)&&o.call(A)}finally{if(c)throw c.error}}}}catch(ye){u={error:ye}}finally{try{w&&!w.done&&(f=m.return)&&f.call(m)}finally{if(u)throw u.error}}var M=S.__read(J.resolveActions(this,r,n,a,g,i,this.machine.config.predictableActionArguments||this.machine.config.preserveActionOrder),2),W=M[0],I=M[1],L=S.__read(b.partition(W,b.isRaisableAction),2),B=L[0],se=L[1],pt=W.filter(function(ye){var Ye;return ye.type===et.start&&((Ye=ye.activity)===null||Ye===void 0?void 0:Ye.type)===et.invoke}),Or=pt.reduce(function(ye,Ye){return ye[Ye.activity.id]=Xs.createInvocableActor(Ye.activity,s.machine,I,a),ye},r?S.__assign({},r.children):{}),Je=new De.State({value:p||r.value,context:I,_event:a,_sessionid:r?r._sessionid:null,historyValue:p?y?b.updateHistoryValue(y,p):void 0:r?r.historyValue:void 0,history:!p||t.source?r:void 0,actions:p?se:[],activities:p?_:r?r.activities:{},events:[],configuration:h,transitions:t.transitions,children:Or,done:v,tags:$.getTagsFromConfiguration(h),machine:this}),ke=n!==I;Je.changed=a.name===et.update||ke;var ve=Je.history;ve&&delete ve.history;var kn=!v&&(this._transient||d.some(function(ye){return ye._transient}));if(!l&&(!kn||a.name===it))return Je;var pe=Je;if(!v)for(kn&&(pe=this.resolveRaisedTransition(pe,{type:et.nullEvent},a,i));B.length;){var Ma=B.shift();pe=this.resolveRaisedTransition(pe,Ma._event,a,i)}var Ra=pe.changed||(ve?!!pe.actions.length||ke||typeof ve.value!=typeof pe.value||!De.stateValuesEqual(pe.value,ve.value):void 0);return pe.changed=Ra,pe.history=ve,pe},e.prototype.getStateNode=function(t){if(nt(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var r=this.states[t];if(!r)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return r},e.prototype.getStateNodeById=function(t){var r=nt(t)?t.slice($r.length):t;if(r===this.id)return this;var n=this.machine.idMap[r];if(!n)throw new Error("Child state node '#".concat(r,"' does not exist on machine '").concat(this.id,"'"));return n},e.prototype.getStateNodeByPath=function(t){if(typeof t=="string"&&nt(t))try{return this.getStateNodeById(t.slice(1))}catch{}for(var r=b.toStatePath(t,this.delimiter).slice(),n=this;r.length;){var i=r.shift();if(!i.length)break;n=n.getStateNode(i)}return n},e.prototype.resolve=function(t){var r,n=this;if(!t)return this.initialStateValue||rt;switch(this.type){case"parallel":return b.mapValues(this.initialStateValue,function(a,u){return a?n.getStateNode(u).resolve(t[u]||a):rt});case"compound":if(b.isString(t)){var i=this.getStateNode(t);return i.type==="parallel"||i.type==="compound"?(r={},r[t]=i.initialStateValue,r):t}return Object.keys(t).length?b.mapValues(t,function(a,u){return a?n.getStateNode(u).resolve(a):rt}):this.initialStateValue||{};default:return t||rt}},e.prototype.getResolvedPath=function(t){if(nt(t)){var r=this.machine.idMap[t.slice($r.length)];if(!r)throw new Error("Unable to find state node '".concat(t,"'"));return r.path}return b.toStatePath(t,this.delimiter)},Object.defineProperty(e.prototype,"initialStateValue",{get:function(){var t;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;var r;if(this.type==="parallel")r=b.mapFilterValues(this.states,function(n){return n.initialStateValue||rt},function(n){return n.type!=="history"});else if(this.initial!==void 0){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));r=$.isLeafNode(this.states[this.initial])?this.initial:(t={},t[this.initial]=this.states[this.initial].initialStateValue,t)}else r={};return this.__cache.initialStateValue=r,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),e.prototype.getInitialState=function(t,r){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,r??this.machine.context,void 0)},Object.defineProperty(e.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"target",{get:function(){var t;if(this.type==="history"){var r=this.config;b.isString(r.target)?t=nt(r.target)?b.pathToStateValue(this.machine.getStateNodeById(r.target).path.slice(this.path.length-1)):r.target:t=r.target}return t},enumerable:!1,configurable:!0}),e.prototype.getRelativeStateNodes=function(t,r,n){return n===void 0&&(n=!0),n?t.type==="history"?t.resolveHistory(r):t.initialStateNodes:[t]},Object.defineProperty(e.prototype,"initialStateNodes",{get:function(){var t=this;if($.isLeafNode(this))return[this];if(this.type==="compound"&&!this.initial)return tt.IS_PRODUCTION||b.warn(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this];var r=b.toStatePaths(this.initialStateValue);return b.flatten(r.map(function(n){return t.getFromRelativePath(n)}))},enumerable:!1,configurable:!0}),e.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var r=S.__read(t),n=r[0],i=r.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var a=this.getStateNode(n);if(a.type==="history")return a.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},e.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:b.mapFilterValues(this.states,function(r,n){if(!t)return r.historyValue();var i=b.isString(t)?void 0:t[n];return r.historyValue(i||r.initialStateValue)},function(r){return!r.history})}},e.prototype.resolveHistory=function(t){var r=this;if(this.type!=="history")return[this];var n=this.parent;if(!t){var i=this.target;return i?b.flatten(b.toStatePaths(i).map(function(u){return n.getFromRelativePath(u)})):n.initialStateNodes}var a=b.nestedPath(n.path,"states")(t).current;return b.isString(a)?[n.getStateNode(a)]:b.flatten(b.toStatePaths(a).map(function(u){return r.history==="deep"?n.getFromRelativePath(u):[n.states[u[0]]]}))},Object.defineProperty(e.prototype,"stateIds",{get:function(){var t=this,r=b.flatten(Object.keys(this.states).map(function(n){return t.states[n].stateIds}));return[this.id].concat(r)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){var t,r,n,i;if(this.__cache.events)return this.__cache.events;var a=this.states,u=new Set(this.ownEvents);if(a)try{for(var f=S.__values(Object.keys(a)),c=f.next();!c.done;c=f.next()){var o=c.value,s=a[o];if(s.states)try{for(var d=(n=void 0,S.__values(s.events)),l=d.next();!l.done;l=d.next()){var h=l.value;u.add("".concat(h))}}catch(v){n={error:v}}finally{try{l&&!l.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}}}catch(v){t={error:v}}finally{try{c&&!c.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(u)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter(function(r){return!(!r.target&&!r.actions.length&&r.internal)}).map(function(r){return r.eventType}));return Array.from(t)},enumerable:!1,configurable:!0}),e.prototype.resolveTarget=function(t){var r=this;if(t!==void 0)return t.map(function(n){if(!b.isString(n))return n;var i=n[0]===r.delimiter;if(i&&!r.parent)return r.getStateNodeByPath(n.slice(1));var a=i?r.key+n:n;if(r.parent)try{var u=r.parent.getStateNodeByPath(a);return u}catch(f){throw new Error("Invalid transition definition for state node '".concat(r.id,`':
`).concat(f.message))}else return r.getStateNodeByPath(a)})},e.prototype.formatTransition=function(t){var r=this,n=b.normalizeTarget(t.target),i="internal"in t?t.internal:n?n.some(function(c){return b.isString(c)&&c[0]===r.delimiter}):!0,a=this.machine.options.guards,u=this.resolveTarget(n),f=S.__assign(S.__assign({},t),{actions:J.toActionObjects(b.toArray(t.actions)),cond:b.toGuard(t.cond,a),target:u,source:this,internal:i,eventType:t.event,toJSON:function(){return S.__assign(S.__assign({},f),{target:f.target?f.target.map(function(c){return"#".concat(c.id)}):void 0,source:"#".concat(r.id)})}});return f},e.prototype.formatTransitions=function(){var t,r,n=this,i;if(!this.config.on)i=[];else if(Array.isArray(this.config.on))i=this.config.on;else{var a=this.config.on,u=xt,f=a[u],c=f===void 0?[]:f,o=S.__rest(a,[typeof u=="symbol"?u:u+""]);i=b.flatten(Object.keys(o).map(function(_){!tt.IS_PRODUCTION&&_===it&&b.warn(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(n.id,'".'));var m=b.toTransitionConfigArray(_,o[_]);return tt.IS_PRODUCTION||Js(n,_,m),m}).concat(b.toTransitionConfigArray(xt,c)))}var s=this.config.always?b.toTransitionConfigArray("",this.config.always):[],d=this.config.onDone?b.toTransitionConfigArray(String(J.done(this.id)),this.config.onDone):[];tt.IS_PRODUCTION||b.warn(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var l=b.flatten(this.invoke.map(function(_){var m=[];return _.onDone&&m.push.apply(m,S.__spreadArray([],S.__read(b.toTransitionConfigArray(String(J.doneInvoke(_.id)),_.onDone)),!1)),_.onError&&m.push.apply(m,S.__spreadArray([],S.__read(b.toTransitionConfigArray(String(J.error(_.id)),_.onError)),!1)),m})),h=this.after,v=b.flatten(S.__spreadArray(S.__spreadArray(S.__spreadArray(S.__spreadArray([],S.__read(d),!1),S.__read(l),!1),S.__read(i),!1),S.__read(s),!1).map(function(_){return b.toArray(_).map(function(m){return n.formatTransition(m)})}));try{for(var p=S.__values(h),y=p.next();!y.done;y=p.next()){var g=y.value;v.push(g)}}catch(_){t={error:_}}finally{try{y&&!y.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}return v},e}();Yr.StateNode=Ws});var Ni=q(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});var ji=Br(),Ks=Ie(),Ii=!1;function $s(e,t,r){return r===void 0&&(r=e.context),new ji.StateNode(e,t,r)}function Ys(e,t){return!Ks.IS_PRODUCTION&&!("predictableActionArguments"in e)&&!Ii&&(Ii=!0,console.warn("It is highly recommended to set `predictableActionArguments` to `true` when using `createMachine`. https://xstate.js.org/docs/guides/actions.html")),new ji.StateNode(e,t)}Yt.Machine=$s;Yt.createMachine=Ys});var Di=q(Qr=>{"use strict";Object.defineProperty(Qr,"__esModule",{value:!0});var Bs=de(),Qs=_e();function Hs(e,t){var r,n,i;try{for(var a=Bs.__values(Object.keys(e)),u=a.next();!u.done;u=a.next()){var f=u.value;Qs.matchesState(f,t)&&(!i||t.length>i.length)&&(i=f)}}catch(c){r={error:c}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return e[i]}Qr.mapState=Hs});var Ci=q(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});var Mi=de(),Ri=wt();function Zs(e,t,r){var n,i,a=Ri.State.from(e,e instanceof Ri.State?e.context:void 0);try{for(var u=Mi.__values(t),f=u.next();!f.done;f=u.next()){var c=Mi.__read(f.value,2),o=c[0],s=c[1];if(a.matches(o))return s(a)}}catch(d){n={error:d}}finally{try{f&&!f.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return r(a)}Hr.matchState=Zs});var zi=q(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});function Fi(e){return e}var eu=Fi;Bt.createSchema=Fi;Bt.t=eu});var Zr=q(F=>{"use strict";Object.defineProperty(F,"__esModule",{value:!0});var Me=He(),tu=mt(),Qt=Ai(),ki=Ni(),ru=Di(),nu=Ci(),qi=zi(),iu=wt(),au=Br(),ou=Gr(),Li=We(),Ht=_e(),su=Me.assign,uu=Me.send,fu=Me.sendTo,cu=Me.sendParent,lu=Me.sendUpdate,du=Me.forwardTo,hu=Me.doneInvoke,vu=Me.raise;F.actions=Me;F.toActorRef=tu.toActorRef;F.Interpreter=Qt.Interpreter;Object.defineProperty(F,"InterpreterStatus",{enumerable:!0,get:function(){return Qt.InterpreterStatus}});F.interpret=Qt.interpret;F.spawn=Qt.spawn;F.Machine=ki.Machine;F.createMachine=ki.createMachine;F.mapState=ru.mapState;F.matchState=nu.matchState;F.createSchema=qi.createSchema;F.t=qi.t;F.State=iu.State;F.StateNode=au.StateNode;F.spawnBehavior=ou.spawnBehavior;Object.defineProperty(F,"ActionTypes",{enumerable:!0,get:function(){return Li.ActionTypes}});Object.defineProperty(F,"SpecialTargets",{enumerable:!0,get:function(){return Li.SpecialTargets}});F.matchesState=Ht.matchesState;F.toEventObject=Ht.toEventObject;F.toObserver=Ht.toObserver;F.toSCXMLEvent=Ht.toSCXMLEvent;F.assign=su;F.doneInvoke=hu;F.forwardTo=du;F.raise=vu;F.send=uu;F.sendParent=cu;F.sendTo=fu;F.sendUpdate=lu});var ra=q(X=>{function ee(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Pe(e){return!!e&&!!e[E]}function me(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===mu}(e)||Array.isArray(e)||!!e[at]||!!(!((t=e.constructor)===null||t===void 0)&&t[at])||ir(e)||ar(e))}function Re(e,t,r){r===void 0&&(r=!1),Ve(e)===0?(r?Object.keys:ot)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function Ve(e){var t=e[E];return t?t.t>3?t.t-4:t.t:Array.isArray(e)?1:ir(e)?2:ar(e)?3:0}function Ue(e,t){return Ve(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function er(e,t){return Ve(e)===2?e.get(t):e[t]}function Qi(e,t,r){var n=Ve(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Hi(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function ir(e){return gu&&e instanceof Map}function ar(e){return _u&&e instanceof Set}function Z(e){return e.i||e.u}function sn(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=ea(e);delete t[E];for(var r=ot(t),n=0;n<r.length;n++){var i=r[n],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function or(e,t){return t===void 0&&(t=!1),un(e)||Pe(e)||!me(e)||(Ve(e)>1&&(e.set=e.add=e.clear=e.delete=pu),Object.freeze(e),t&&Re(e,function(r,n){return or(n,!0)},!0)),e}function pu(){ee(2)}function un(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Oe(e){var t=on[e];return t||ee(18,e),t}function fn(e,t){on[e]||(on[e]=t)}function Tt(){return jt}function en(e,t){t&&(Oe("Patches"),e.o=[],e.v=[],e.s=t)}function tr(e){an(e),e.p.forEach(yu),e.p=null}function an(e){e===jt&&(jt=e.l)}function Ui(e){return jt={p:[],l:jt,h:e,_:!0,m:0}}function yu(e){var t=e[E];t.t===0||t.t===1?t.j():t.O=!0}function tn(e,t){t.m=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.S||Oe("ES5").P(t,e,n),n?(r[E].g&&(tr(t),ee(4)),me(e)&&(e=rr(t,e),t.l||nr(t,e)),t.o&&Oe("Patches").M(r[E].u,e,t.o,t.v)):e=rr(t,r,[]),tr(t),t.o&&t.s(t.o,t.v),e!==sr?e:void 0}function rr(e,t,r){if(un(t))return t;var n=t[E];if(!n)return Re(t,function(f,c){return Vi(e,n,t,f,c,r)},!0),t;if(n.A!==e)return t;if(!n.g)return nr(e,n.u,!0),n.u;if(!n.R){n.R=!0,n.A.m--;var i=n.t===4||n.t===5?n.i=sn(n.k):n.i,a=i,u=!1;n.t===3&&(a=new Set(i),i.clear(),u=!0),Re(a,function(f,c){return Vi(e,n,i,f,c,r,u)}),nr(e,i,!1),r&&e.o&&Oe("Patches").F(n,r,e.o,e.v)}return n.i}function Vi(e,t,r,n,i,a,u){if(Pe(i)){var f=rr(e,i,a&&t&&t.t!==3&&!Ue(t.N,n)?a.concat(n):void 0);if(Qi(r,n,f),!Pe(f))return;e._=!1}else u&&r.add(i);if(me(i)&&!un(i)){if(!e.h.D&&e.m<1)return;rr(e,i),t&&t.A.l||nr(e,i)}}function nr(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e._&&or(t,r)}function rn(e,t){var r=e[E];return(r?Z(r):e)[t]}function Xi(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function ae(e){e.g||(e.g=!0,e.l&&ae(e.l))}function nn(e){e.i||(e.i=sn(e.u))}function It(e,t,r){var n=ir(t)?Oe("MapSet").K(t,r):ar(t)?Oe("MapSet").$(t,r):e.S?function(i,a){var u=Array.isArray(i),f={t:u?1:0,A:a?a.A:Tt(),g:!1,R:!1,N:{},l:a,u:i,k:null,i:null,j:null,C:!1},c=f,o=Nt;u&&(c=[f],o=Et);var s=Proxy.revocable(c,o),d=s.revoke,l=s.proxy;return f.k=l,f.j=d,l}(t,r):Oe("ES5").I(t,r);return(r?r.A:Tt()).p.push(n),n}function Zi(e){return Pe(e)||ee(22,e),function t(r){if(!me(r))return r;var n,i=r[E],a=Ve(r);if(i){if(!i.g&&(i.t<4||!Oe("ES5").J(i)))return i.u;i.R=!0,n=Gi(r,a),i.R=!1}else n=Gi(r,a);return Re(n,function(u,f){i&&er(i.u,u)===f||Qi(n,u,t(f))}),a===3?new Set(n):n}(e)}function Gi(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return sn(e)}function Ji(){function e(a,u){var f=i[a];return f?f.enumerable=u:i[a]=f={configurable:!0,enumerable:u,get:function(){return Nt.get(this[E],a)},set:function(c){Nt.set(this[E],a,c)}},f}function t(a){for(var u=a.length-1;u>=0;u--){var f=a[u][E];if(!f.g)switch(f.t){case 5:n(f)&&ae(f);break;case 4:r(f)&&ae(f)}}}function r(a){for(var u=a.u,f=a.k,c=ot(f),o=c.length-1;o>=0;o--){var s=c[o];if(s!==E){var d=u[s];if(d===void 0&&!Ue(u,s))return!0;var l=f[s],h=l&&l[E];if(h?h.u!==d:!Hi(l,d))return!0}}var v=!!u[E];return c.length!==ot(u).length+(v?0:1)}function n(a){var u=a.k;if(u.length!==a.u.length)return!0;var f=Object.getOwnPropertyDescriptor(u,u.length-1);if(f&&!f.get)return!0;for(var c=0;c<u.length;c++)if(!u.hasOwnProperty(c))return!0;return!1}var i={};fn("ES5",{I:function(a,u){var f=Array.isArray(a),c=function(s,d){if(s){for(var l=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(l,""+h,e(h,!0));return l}var v=ea(d);delete v[E];for(var p=ot(v),y=0;y<p.length;y++){var g=p[y];v[g]=e(g,s||!!v[g].enumerable)}return Object.create(Object.getPrototypeOf(d),v)}(f,a),o={t:f?5:4,A:u?u.A:Tt(),g:!1,R:!1,N:{},l:u,u:a,k:c,i:null,O:!1,C:!1};return Object.defineProperty(c,E,{value:o,writable:!0}),c},P:function(a,u,f){f?Pe(u)&&u[E].A===a&&t(a.p):(a.o&&function c(o){if(o&&typeof o=="object"){var s=o[E];if(s){var d=s.u,l=s.k,h=s.N,v=s.t;if(v===4)Re(l,function(m){m!==E&&(d[m]!==void 0||Ue(d,m)?h[m]||c(l[m]):(h[m]=!0,ae(s)))}),Re(d,function(m){l[m]!==void 0||Ue(l,m)||(h[m]=!1,ae(s))});else if(v===5){if(n(s)&&(ae(s),h.length=!0),l.length<d.length)for(var p=l.length;p<d.length;p++)h[p]=!1;else for(var y=d.length;y<l.length;y++)h[y]=!0;for(var g=Math.min(l.length,d.length),_=0;_<g;_++)l.hasOwnProperty(_)||(h[_]=!0),h[_]===void 0&&c(l[_])}}}}(a.p[0]),t(a.p))},J:function(a){return a.t===4?r(a):n(a)}})}function Wi(){function e(n){if(!me(n))return n;if(Array.isArray(n))return n.map(e);if(ir(n))return new Map(Array.from(n.entries()).map(function(u){return[u[0],e(u[1])]}));if(ar(n))return new Set(Array.from(n).map(e));var i=Object.create(Object.getPrototypeOf(n));for(var a in n)i[a]=e(n[a]);return Ue(n,at)&&(i[at]=n[at]),i}function t(n){return Pe(n)?e(n):n}var r="add";fn("Patches",{W:function(n,i){return i.forEach(function(a){for(var u=a.path,f=a.op,c=n,o=0;o<u.length-1;o++){var s=Ve(c),d=u[o];typeof d!="string"&&typeof d!="number"&&(d=""+d),s!==0&&s!==1||d!=="__proto__"&&d!=="constructor"||ee(24),typeof c=="function"&&d==="prototype"&&ee(24),typeof(c=er(c,d))!="object"&&ee(15,u.join("/"))}var l=Ve(c),h=e(a.value),v=u[u.length-1];switch(f){case"replace":switch(l){case 2:return c.set(v,h);case 3:ee(16);default:return c[v]=h}case r:switch(l){case 1:return v==="-"?c.push(h):c.splice(v,0,h);case 2:return c.set(v,h);case 3:return c.add(h);default:return c[v]=h}case"remove":switch(l){case 1:return c.splice(v,1);case 2:return c.delete(v);case 3:return c.delete(a.value);default:return delete c[v]}default:ee(17,f)}}),n},F:function(n,i,a,u){switch(n.t){case 0:case 4:case 2:return function(f,c,o,s){var d=f.u,l=f.i;Re(f.N,function(h,v){var p=er(d,h),y=er(l,h),g=v?Ue(d,h)?"replace":r:"remove";if(p!==y||g!=="replace"){var _=c.concat(h);o.push(g==="remove"?{op:g,path:_}:{op:g,path:_,value:y}),s.push(g===r?{op:"remove",path:_}:g==="remove"?{op:r,path:_,value:t(p)}:{op:"replace",path:_,value:t(p)})}})}(n,i,a,u);case 5:case 1:return function(f,c,o,s){var d=f.u,l=f.N,h=f.i;if(h.length<d.length){var v=[h,d];d=v[0],h=v[1];var p=[s,o];o=p[0],s=p[1]}for(var y=0;y<d.length;y++)if(l[y]&&h[y]!==d[y]){var g=c.concat([y]);o.push({op:"replace",path:g,value:t(h[y])}),s.push({op:"replace",path:g,value:t(d[y])})}for(var _=d.length;_<h.length;_++){var m=c.concat([_]);o.push({op:r,path:m,value:t(h[_])})}d.length<h.length&&s.push({op:"replace",path:c.concat(["length"]),value:d.length})}(n,i,a,u);case 3:return function(f,c,o,s){var d=f.u,l=f.i,h=0;d.forEach(function(v){if(!l.has(v)){var p=c.concat([h]);o.push({op:"remove",path:p,value:v}),s.unshift({op:r,path:p,value:v})}h++}),h=0,l.forEach(function(v){if(!d.has(v)){var p=c.concat([h]);o.push({op:r,path:p,value:v}),s.unshift({op:"remove",path:p,value:v})}h++})}(n,i,a,u)}},M:function(n,i,a,u){a.push({op:"replace",path:[],value:i===sr?void 0:i}),u.push({op:"replace",path:[],value:n})}})}function Ki(){function e(f,c){function o(){this.constructor=f}i(f,c),f.prototype=(o.prototype=c.prototype,new o)}function t(f){f.i||(f.N=new Map,f.i=new Map(f.u))}function r(f){f.i||(f.i=new Set,f.u.forEach(function(c){if(me(c)){var o=It(f.A.h,c,f);f.p.set(c,o),f.i.add(o)}else f.i.add(c)}))}function n(f){f.O&&ee(3,JSON.stringify(Z(f)))}var i=function(f,c){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var d in s)s.hasOwnProperty(d)&&(o[d]=s[d])})(f,c)},a=function(){function f(o,s){return this[E]={t:2,l:s,A:s?s.A:Tt(),g:!1,R:!1,i:void 0,N:void 0,u:o,k:this,C:!1,O:!1},this}e(f,Map);var c=f.prototype;return Object.defineProperty(c,"size",{get:function(){return Z(this[E]).size}}),c.has=function(o){return Z(this[E]).has(o)},c.set=function(o,s){var d=this[E];return n(d),Z(d).has(o)&&Z(d).get(o)===s||(t(d),ae(d),d.N.set(o,!0),d.i.set(o,s),d.N.set(o,!0)),this},c.delete=function(o){if(!this.has(o))return!1;var s=this[E];return n(s),t(s),ae(s),s.u.has(o)?s.N.set(o,!1):s.N.delete(o),s.i.delete(o),!0},c.clear=function(){var o=this[E];n(o),Z(o).size&&(t(o),ae(o),o.N=new Map,Re(o.u,function(s){o.N.set(s,!1)}),o.i.clear())},c.forEach=function(o,s){var d=this;Z(this[E]).forEach(function(l,h){o.call(s,d.get(h),h,d)})},c.get=function(o){var s=this[E];n(s);var d=Z(s).get(o);if(s.R||!me(d)||d!==s.u.get(o))return d;var l=It(s.A.h,d,s);return t(s),s.i.set(o,l),l},c.keys=function(){return Z(this[E]).keys()},c.values=function(){var o,s=this,d=this.keys();return(o={})[Zt]=function(){return s.values()},o.next=function(){var l=d.next();return l.done?l:{done:!1,value:s.get(l.value)}},o},c.entries=function(){var o,s=this,d=this.keys();return(o={})[Zt]=function(){return s.entries()},o.next=function(){var l=d.next();if(l.done)return l;var h=s.get(l.value);return{done:!1,value:[l.value,h]}},o},c[Zt]=function(){return this.entries()},f}(),u=function(){function f(o,s){return this[E]={t:3,l:s,A:s?s.A:Tt(),g:!1,R:!1,i:void 0,u:o,k:this,p:new Map,O:!1,C:!1},this}e(f,Set);var c=f.prototype;return Object.defineProperty(c,"size",{get:function(){return Z(this[E]).size}}),c.has=function(o){var s=this[E];return n(s),s.i?!!s.i.has(o)||!(!s.p.has(o)||!s.i.has(s.p.get(o))):s.u.has(o)},c.add=function(o){var s=this[E];return n(s),this.has(o)||(r(s),ae(s),s.i.add(o)),this},c.delete=function(o){if(!this.has(o))return!1;var s=this[E];return n(s),r(s),ae(s),s.i.delete(o)||!!s.p.has(o)&&s.i.delete(s.p.get(o))},c.clear=function(){var o=this[E];n(o),Z(o).size&&(r(o),ae(o),o.i.clear())},c.values=function(){var o=this[E];return n(o),r(o),o.i.values()},c.entries=function(){var o=this[E];return n(o),r(o),o.i.entries()},c.keys=function(){return this.values()},c[Zt]=function(){return this.values()},c.forEach=function(o,s){for(var d=this.values(),l=d.next();!l.done;)o.call(s,l.value,l.value,this),l=d.next()},f}();fn("MapSet",{K:function(f,c){return new a(f,c)},$:function(f,c){return new u(f,c)}})}var $i;Object.defineProperty(X,"__esModule",{value:!0});var jt,cn=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",gu=typeof Map<"u",_u=typeof Set<"u",Yi=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",sr=cn?Symbol.for("immer-nothing"):(($i={})["immer-nothing"]=!0,$i),at=cn?Symbol.for("immer-draftable"):"__$immer_draftable",E=cn?Symbol.for("immer-state"):"__$immer_state",Zt=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",mu=""+Object.prototype.constructor,ot=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ea=Object.getOwnPropertyDescriptors||function(e){var t={};return ot(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},on={},Nt={get:function(e,t){if(t===E)return e;var r=Z(e);if(!Ue(r,t))return function(i,a,u){var f,c=Xi(a,u);return c?"value"in c?c.value:(f=c.get)===null||f===void 0?void 0:f.call(i.k):void 0}(e,r,t);var n=r[t];return e.R||!me(n)?n:n===rn(e.u,t)?(nn(e),e.i[t]=It(e.A.h,n,e)):n},has:function(e,t){return t in Z(e)},ownKeys:function(e){return Reflect.ownKeys(Z(e))},set:function(e,t,r){var n=Xi(Z(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.g){var i=rn(Z(e),t),a=i?.[E];if(a&&a.u===r)return e.i[t]=r,e.N[t]=!1,!0;if(Hi(r,i)&&(r!==void 0||Ue(e.u,t)))return!0;nn(e),ae(e)}return e.i[t]===r&&(r!==void 0||t in e.i)||Number.isNaN(r)&&Number.isNaN(e.i[t])||(e.i[t]=r,e.N[t]=!0),!0},deleteProperty:function(e,t){return rn(e.u,t)!==void 0||t in e.u?(e.N[t]=!1,nn(e),ae(e)):delete e.N[t],e.i&&delete e.i[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Z(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.t!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){ee(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.u)},setPrototypeOf:function(){ee(12)}},Et={};Re(Nt,function(e,t){Et[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Et.deleteProperty=function(e,t){return Et.set.call(this,e,t,void 0)},Et.set=function(e,t,r){return Nt.set.call(this,e[0],t,r,e[0])};var ta=function(){function e(r){var n=this;this.S=Yi,this.D=!0,this.produce=function(i,a,u){if(typeof i=="function"&&typeof a!="function"){var f=a;a=i;var c=n;return function(p){var y=this;p===void 0&&(p=f);for(var g=arguments.length,_=Array(g>1?g-1:0),m=1;m<g;m++)_[m-1]=arguments[m];return c.produce(p,function(w){var O;return(O=a).call.apply(O,[y,w].concat(_))})}}var o;if(typeof a!="function"&&ee(6),u!==void 0&&typeof u!="function"&&ee(7),me(i)){var s=Ui(n),d=It(n,i,void 0),l=!0;try{o=a(d),l=!1}finally{l?tr(s):an(s)}return typeof Promise<"u"&&o instanceof Promise?o.then(function(p){return en(s,u),tn(p,s)},function(p){throw tr(s),p}):(en(s,u),tn(o,s))}if(!i||typeof i!="object"){if((o=a(i))===void 0&&(o=i),o===sr&&(o=void 0),n.D&&or(o,!0),u){var h=[],v=[];Oe("Patches").M(i,o,h,v),u(h,v)}return o}ee(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(o){for(var s=arguments.length,d=Array(s>1?s-1:0),l=1;l<s;l++)d[l-1]=arguments[l];return n.produceWithPatches(o,function(h){return i.apply(void 0,[h].concat(d))})};var u,f,c=n.produce(i,a,function(o,s){u=o,f=s});return typeof Promise<"u"&&c instanceof Promise?c.then(function(o){return[o,u,f]}):[c,u,f]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){me(r)||ee(8),Pe(r)&&(r=Zi(r));var n=Ui(this),i=It(this,r,void 0);return i[E].C=!0,an(n),i},t.finishDraft=function(r,n){var i=(r&&r[E]).A;return en(i,n),tn(void 0,i)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Yi&&ee(20),this.S=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var a=n[i];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}i>-1&&(n=n.slice(i+1));var u=Oe("Patches").W;return Pe(r)?u(r,n):this.produce(r,function(f){return u(f,n)})},e}(),fe=new ta,Bi=fe.produce,bu=fe.produceWithPatches.bind(fe),Su=fe.setAutoFreeze.bind(fe),wu=fe.setUseProxies.bind(fe),Ou=fe.applyPatches.bind(fe),Pu=fe.createDraft.bind(fe),Au=fe.finishDraft.bind(fe);X.Immer=ta,X.applyPatches=Ou,X.castDraft=function(e){return e},X.castImmutable=function(e){return e},X.createDraft=Pu,X.current=Zi,X.default=Bi,X.enableAllPlugins=function(){Ji(),Ki(),Wi()},X.enableES5=Ji,X.enableMapSet=Ki,X.enablePatches=Wi,X.finishDraft=Au,X.freeze=or,X.immerable=at,X.isDraft=Pe,X.isDraftable=me,X.nothing=sr,X.original=function(e){return Pe(e)||ee(23,e),e[E].u},X.produce=Bi,X.produceWithPatches=bu,X.setAutoFreeze=Su,X.setUseProxies=wu});var _a=q(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});var ln,_n=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xu=typeof Map<"u",Eu=typeof Set<"u",na=typeof Proxy<"u"&&typeof Proxy.revocable<"u"&&typeof Reflect<"u",hr=_n?Symbol.for("immer-nothing"):(ln={},ln["immer-nothing"]=!0,ln),st=_n?Symbol.for("immer-draftable"):"__$immer_draftable",T=_n?Symbol.for("immer-state"):"__$immer_state",ur=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",Tu={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(t){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+t},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(t){return"Cannot apply patch, path doesn't resolve: "+t},16:'Sets cannot have "replace" patches.',17:function(t){return"Unsupported patch operation: "+t},18:function(t){return"The plugin for '"+t+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+t+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(t){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+t+"'"},22:function(t){return"'current' expects a draft, got: "+t},23:function(t){return"'original' expects a draft, got: "+t},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"};function V(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];{var i=Tu[e],a=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw new Error("[Immer] "+a)}}function xe(e){return!!e&&!!e[T]}function be(e){var t;return e?ju(e)||Array.isArray(e)||!!e[st]||!!(!((t=e.constructor)===null||t===void 0)&&t[st])||vr(e)||pr(e):!1}var Iu=Object.prototype.constructor.toString();function ju(e){if(!e||typeof e!="object")return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Iu}function Nu(e){return xe(e)||V(23,e),e[T].base_}var ut=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:typeof Object.getOwnPropertySymbols<"u"?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,sa=Object.getOwnPropertyDescriptors||function(t){var r={};return ut(t).forEach(function(n){r[n]=Object.getOwnPropertyDescriptor(t,n)}),r};function Ce(e,t,r){r===void 0&&(r=!1),Ge(e)===0?(r?Object.keys:ut)(e).forEach(function(n){(!r||typeof n!="symbol")&&t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function Ge(e){var t=e[T];return t?t.type_>3?t.type_-4:t.type_:Array.isArray(e)?1:vr(e)?2:pr(e)?3:0}function Xe(e,t){return Ge(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function fr(e,t){return Ge(e)===2?e.get(t):e[t]}function ua(e,t,r){var n=Ge(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function fa(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function vr(e){return xu&&e instanceof Map}function pr(e){return Eu&&e instanceof Set}function Y(e){return e.copy_||e.base_}function mn(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=sa(e);delete t[T];for(var r=ut(t),n=0;n<r.length;n++){var i=r[n],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function yr(e,t){return t===void 0&&(t=!1),bn(e)||xe(e)||!be(e)||(Ge(e)>1&&(e.set=e.add=e.clear=e.delete=Du),Object.freeze(e),t&&Ce(e,function(r,n){return yr(n,!0)},!0)),e}function Du(){V(2)}function bn(e){return e==null||typeof e!="object"?!0:Object.isFrozen(e)}var yn={};function Ae(e){var t=yn[e];return t||V(18,e),t}function Sn(e,t){yn[e]||(yn[e]=t)}var ft;function Dt(){return ft||V(0),ft}function Mu(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function dn(e,t){t&&(Ae("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function cr(e){gn(e),e.drafts_.forEach(Ru),e.drafts_=null}function gn(e){e===ft&&(ft=e.parent_)}function ia(e){return ft=Mu(ft,e)}function Ru(e){var t=e[T];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function hn(e,t){t.unfinalizedDrafts_=t.drafts_.length;var r=t.drafts_[0],n=e!==void 0&&e!==r;return t.immer_.useProxies_||Ae("ES5").willFinalizeES5_(t,e,n),n?(r[T].modified_&&(cr(t),V(4)),be(e)&&(e=lr(t,e),t.parent_||dr(t,e)),t.patches_&&Ae("Patches").generateReplacementPatches_(r[T].base_,e,t.patches_,t.inversePatches_)):e=lr(t,r,[]),cr(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==hr?e:void 0}function lr(e,t,r){if(bn(t))return t;var n=t[T];if(!n)return Ce(t,function(f,c){return aa(e,n,t,f,c,r)},!0),t;if(n.scope_!==e)return t;if(!n.modified_)return dr(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;var i=n.type_===4||n.type_===5?n.copy_=mn(n.draft_):n.copy_,a=i,u=!1;n.type_===3&&(a=new Set(i),i.clear(),u=!0),Ce(a,function(f,c){return aa(e,n,i,f,c,r,u)}),dr(e,i,!1),r&&e.patches_&&Ae("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function aa(e,t,r,n,i,a,u){if(i===r&&V(5),xe(i)){var f=a&&t&&t.type_!==3&&!Xe(t.assigned_,n)?a.concat(n):void 0,c=lr(e,i,f);if(ua(r,n,c),xe(c))e.canAutoFreeze_=!1;else return}else u&&r.add(i);if(be(i)&&!bn(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;lr(e,i),(!t||!t.scope_.parent_)&&dr(e,i)}}function dr(e,t,r){r===void 0&&(r=!1),!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&yr(t,r)}function Cu(e,t){var r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:Dt(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=Mt;r&&(i=[n],a=Rt);var u=Proxy.revocable(i,a),f=u.revoke,c=u.proxy;return n.draft_=c,n.revoke_=f,c}var Mt={get:function(t,r){if(r===T)return t;var n=Y(t);if(!Xe(n,r))return Fu(t,n,r);var i=n[r];return t.finalized_||!be(i)?i:i===vn(t.base_,r)?(pn(t),t.copy_[r]=Ct(t.scope_.immer_,i,t)):i},has:function(t,r){return r in Y(t)},ownKeys:function(t){return Reflect.ownKeys(Y(t))},set:function(t,r,n){var i=ca(Y(t),r);if(i?.set)return i.set.call(t.draft_,n),!0;if(!t.modified_){var a=vn(Y(t),r),u=a?.[T];if(u&&u.base_===n)return t.copy_[r]=n,t.assigned_[r]=!1,!0;if(fa(n,a)&&(n!==void 0||Xe(t.base_,r)))return!0;pn(t),oe(t)}return t.copy_[r]===n&&(n!==void 0||r in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[r])||(t.copy_[r]=n,t.assigned_[r]=!0),!0},deleteProperty:function(t,r){return vn(t.base_,r)!==void 0||r in t.base_?(t.assigned_[r]=!1,pn(t),oe(t)):delete t.assigned_[r],t.copy_&&delete t.copy_[r],!0},getOwnPropertyDescriptor:function(t,r){var n=Y(t),i=Reflect.getOwnPropertyDescriptor(n,r);return i&&{writable:!0,configurable:t.type_!==1||r!=="length",enumerable:i.enumerable,value:n[r]}},defineProperty:function(){V(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.base_)},setPrototypeOf:function(){V(12)}},Rt={};Ce(Mt,function(e,t){Rt[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Rt.deleteProperty=function(e,t){return isNaN(parseInt(t))&&V(13),Rt.set.call(this,e,t,void 0)};Rt.set=function(e,t,r){return t!=="length"&&isNaN(parseInt(t))&&V(14),Mt.set.call(this,e[0],t,r,e[0])};function vn(e,t){var r=e[T],n=r?Y(r):e;return n[t]}function Fu(e,t,r){var n,i=ca(t,r);return i?"value"in i?i.value:(n=i.get)===null||n===void 0?void 0:n.call(e.draft_):void 0}function ca(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function oe(e){e.modified_||(e.modified_=!0,e.parent_&&oe(e.parent_))}function pn(e){e.copy_||(e.copy_=mn(e.base_))}var la=function(){function e(r){var n=this;this.useProxies_=na,this.autoFreeze_=!0,this.produce=function(i,a,u){if(typeof i=="function"&&typeof a!="function"){var f=a;a=i;var c=n;return function(y){var g=this;y===void 0&&(y=f);for(var _=arguments.length,m=new Array(_>1?_-1:0),w=1;w<_;w++)m[w-1]=arguments[w];return c.produce(y,function(O){var A;return(A=a).call.apply(A,[g,O].concat(m))})}}typeof a!="function"&&V(6),u!==void 0&&typeof u!="function"&&V(7);var o;if(be(i)){var s=ia(n),d=Ct(n,i,void 0),l=!0;try{o=a(d),l=!1}finally{l?cr(s):gn(s)}return typeof Promise<"u"&&o instanceof Promise?o.then(function(p){return dn(s,u),hn(p,s)},function(p){throw cr(s),p}):(dn(s,u),hn(o,s))}else if(!i||typeof i!="object"){if(o=a(i),o===void 0&&(o=i),o===hr&&(o=void 0),n.autoFreeze_&&yr(o,!0),u){var h=[],v=[];Ae("Patches").generateReplacementPatches_(i,o,h,v),u(h,v)}return o}else V(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(o){for(var s=arguments.length,d=new Array(s>1?s-1:0),l=1;l<s;l++)d[l-1]=arguments[l];return n.produceWithPatches(o,function(h){return i.apply(void 0,[h].concat(d))})};var u,f,c=n.produce(i,a,function(o,s){u=o,f=s});return typeof Promise<"u"&&c instanceof Promise?c.then(function(o){return[o,u,f]}):[c,u,f]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){be(n)||V(8),xe(n)&&(n=da(n));var i=ia(this),a=Ct(this,n,void 0);return a[T].isManual_=!0,gn(i),a},t.finishDraft=function(n,i){var a=n&&n[T];(!a||!a.isManual_)&&V(9),a.finalized_&&V(10);var u=a.scope_;return dn(u,i),hn(void 0,u)},t.setAutoFreeze=function(n){this.autoFreeze_=n},t.setUseProxies=function(n){n&&!na&&V(20),this.useProxies_=n},t.applyPatches=function(n,i){var a;for(a=i.length-1;a>=0;a--){var u=i[a];if(u.path.length===0&&u.op==="replace"){n=u.value;break}}a>-1&&(i=i.slice(a+1));var f=Ae("Patches").applyPatches_;return xe(n)?f(n,i):this.produce(n,function(c){return f(c,i)})},e}();function Ct(e,t,r){var n=vr(t)?Ae("MapSet").proxyMap_(t,r):pr(t)?Ae("MapSet").proxySet_(t,r):e.useProxies_?Cu(t,r):Ae("ES5").createES5Proxy_(t,r),i=r?r.scope_:Dt();return i.drafts_.push(n),n}function da(e){return xe(e)||V(22,e),ha(e)}function ha(e){if(!be(e))return e;var t=e[T],r,n=Ge(e);if(t){if(!t.modified_&&(t.type_<4||!Ae("ES5").hasChanges_(t)))return t.base_;t.finalized_=!0,r=oa(e,n),t.finalized_=!1}else r=oa(e,n);return Ce(r,function(i,a){t&&fr(t.base_,i)===a||ua(r,i,ha(a))}),n===3?new Set(r):r}function oa(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return mn(e)}function va(){function e(d,l,h){h?xe(l)&&l[T].scope_===d&&a(d.drafts_):(d.patches_&&u(d.drafts_[0]),a(d.drafts_))}function t(d,l){if(d){for(var h=new Array(l.length),v=0;v<l.length;v++)Object.defineProperty(h,""+v,i(v,!0));return h}else{var p=sa(l);delete p[T];for(var y=ut(p),g=0;g<y.length;g++){var _=y[g];p[_]=i(_,d||!!p[_].enumerable)}return Object.create(Object.getPrototypeOf(l),p)}}function r(d,l){var h=Array.isArray(d),v=t(h,d),p={type_:h?5:4,scope_:l?l.scope_:Dt(),modified_:!1,finalized_:!1,assigned_:{},parent_:l,base_:d,draft_:v,copy_:null,revoked_:!1,isManual_:!1};return Object.defineProperty(v,T,{value:p,writable:!0}),v}var n={};function i(d,l){var h=n[d];return h?h.enumerable=l:n[d]=h={configurable:!0,enumerable:l,get:function(){var p=this[T];return s(p),Mt.get(p,d)},set:function(p){var y=this[T];s(y),Mt.set(y,d,p)}},h}function a(d){for(var l=d.length-1;l>=0;l--){var h=d[l][T];if(!h.modified_)switch(h.type_){case 5:c(h)&&oe(h);break;case 4:f(h)&&oe(h);break}}}function u(d){if(!(!d||typeof d!="object")){var l=d[T];if(l){var h=l.base_,v=l.draft_,p=l.assigned_,y=l.type_;if(y===4)Ce(v,function(O){O!==T&&(h[O]===void 0&&!Xe(h,O)?(p[O]=!0,oe(l)):p[O]||u(v[O]))}),Ce(h,function(O){v[O]===void 0&&!Xe(v,O)&&(p[O]=!1,oe(l))});else if(y===5){if(c(l)&&(oe(l),p.length=!0),v.length<h.length)for(var g=v.length;g<h.length;g++)p[g]=!1;else for(var _=h.length;_<v.length;_++)p[_]=!0;for(var m=Math.min(v.length,h.length),w=0;w<m;w++)v.hasOwnProperty(w)||(p[w]=!0),p[w]===void 0&&u(v[w])}}}}function f(d){for(var l=d.base_,h=d.draft_,v=ut(h),p=v.length-1;p>=0;p--){var y=v[p];if(y!==T){var g=l[y];if(g===void 0&&!Xe(l,y))return!0;var _=h[y],m=_&&_[T];if(m?m.base_!==g:!fa(_,g))return!0}}var w=!!l[T];return v.length!==ut(l).length+(w?0:1)}function c(d){var l=d.draft_;if(l.length!==d.base_.length)return!0;var h=Object.getOwnPropertyDescriptor(l,l.length-1);if(h&&!h.get)return!0;for(var v=0;v<l.length;v++)if(!l.hasOwnProperty(v))return!0;return!1}function o(d){return d.type_===4?f(d):c(d)}function s(d){d.revoked_&&V(3,JSON.stringify(Y(d)))}Sn("ES5",{createES5Proxy_:r,willFinalizeES5_:e,hasChanges_:o})}function pa(){var e="replace",t="add",r="remove";function n(d,l,h,v){switch(d.type_){case 0:case 4:case 2:return a(d,l,h,v);case 5:case 1:return i(d,l,h,v);case 3:return u(d,l,h,v)}}function i(d,l,h,v){var p=d.base_,y=d.assigned_,g=d.copy_;if(g.length<p.length){var _=[g,p];p=_[0],g=_[1];var m=[v,h];h=m[0],v=m[1]}for(var w=0;w<p.length;w++)if(y[w]&&g[w]!==p[w]){var O=l.concat([w]);h.push({op:e,path:O,value:s(g[w])}),v.push({op:e,path:O,value:s(p[w])})}for(var A=p.length;A<g.length;A++){var D=l.concat([A]);h.push({op:t,path:D,value:s(g[A])})}p.length<g.length&&v.push({op:e,path:l.concat(["length"]),value:p.length})}function a(d,l,h,v){var p=d.base_,y=d.copy_;Ce(d.assigned_,function(g,_){var m=fr(p,g),w=fr(y,g),O=_?Xe(p,g)?e:t:r;if(!(m===w&&O===e)){var A=l.concat(g);h.push(O===r?{op:O,path:A}:{op:O,path:A,value:w}),v.push(O===t?{op:r,path:A}:O===r?{op:t,path:A,value:s(m)}:{op:e,path:A,value:s(m)})}})}function u(d,l,h,v){var p=d.base_,y=d.copy_,g=0;p.forEach(function(_){if(!y.has(_)){var m=l.concat([g]);h.push({op:r,path:m,value:_}),v.unshift({op:t,path:m,value:_})}g++}),g=0,y.forEach(function(_){if(!p.has(_)){var m=l.concat([g]);h.push({op:t,path:m,value:_}),v.unshift({op:r,path:m,value:_})}g++})}function f(d,l,h,v){h.push({op:e,path:[],value:l===hr?void 0:l}),v.push({op:e,path:[],value:d})}function c(d,l){return l.forEach(function(h){for(var v=h.path,p=h.op,y=d,g=0;g<v.length-1;g++){var _=Ge(y),m=v[g];typeof m!="string"&&typeof m!="number"&&(m=""+m),(_===0||_===1)&&(m==="__proto__"||m==="constructor")&&V(24),typeof y=="function"&&m==="prototype"&&V(24),y=fr(y,m),typeof y!="object"&&V(15,v.join("/"))}var w=Ge(y),O=o(h.value),A=v[v.length-1];switch(p){case e:switch(w){case 2:return y.set(A,O);case 3:V(16);default:return y[A]=O}case t:switch(w){case 1:return A==="-"?y.push(O):y.splice(A,0,O);case 2:return y.set(A,O);case 3:return y.add(O);default:return y[A]=O}case r:switch(w){case 1:return y.splice(A,1);case 2:return y.delete(A);case 3:return y.delete(h.value);default:return delete y[A]}default:V(17,p)}}),d}function o(d){if(!be(d))return d;if(Array.isArray(d))return d.map(o);if(vr(d))return new Map(Array.from(d.entries()).map(function(v){var p=v[0],y=v[1];return[p,o(y)]}));if(pr(d))return new Set(Array.from(d).map(o));var l=Object.create(Object.getPrototypeOf(d));for(var h in d)l[h]=o(d[h]);return Xe(d,st)&&(l[st]=d[st]),l}function s(d){return xe(d)?o(d):d}Sn("Patches",{applyPatches_:c,generatePatches_:n,generateReplacementPatches_:f})}function ya(){var e=function(s,d){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var v in h)h.hasOwnProperty(v)&&(l[v]=h[v])},e(s,d)};function t(o,s){e(o,s);function d(){this.constructor=o}o.prototype=(d.prototype=s.prototype,new d)}var r=function(o){t(s,o);function s(l,h){return this[T]={type_:2,parent_:h,scope_:h?h.scope_:Dt(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:l,draft_:this,isManual_:!1,revoked_:!1},this}var d=s.prototype;return Object.defineProperty(d,"size",{get:function(){return Y(this[T]).size}}),d.has=function(l){return Y(this[T]).has(l)},d.set=function(l,h){var v=this[T];return c(v),(!Y(v).has(l)||Y(v).get(l)!==h)&&(i(v),oe(v),v.assigned_.set(l,!0),v.copy_.set(l,h),v.assigned_.set(l,!0)),this},d.delete=function(l){if(!this.has(l))return!1;var h=this[T];return c(h),i(h),oe(h),h.base_.has(l)?h.assigned_.set(l,!1):h.assigned_.delete(l),h.copy_.delete(l),!0},d.clear=function(){var l=this[T];c(l),Y(l).size&&(i(l),oe(l),l.assigned_=new Map,Ce(l.base_,function(h){l.assigned_.set(h,!1)}),l.copy_.clear())},d.forEach=function(l,h){var v=this,p=this[T];Y(p).forEach(function(y,g,_){l.call(h,v.get(g),g,v)})},d.get=function(l){var h=this[T];c(h);var v=Y(h).get(l);if(h.finalized_||!be(v)||v!==h.base_.get(l))return v;var p=Ct(h.scope_.immer_,v,h);return i(h),h.copy_.set(l,p),p},d.keys=function(){return Y(this[T]).keys()},d.values=function(){var l=this,h,v=this.keys();return h={},h[ur]=function(){return l.values()},h.next=function(){var y=v.next();if(y.done)return y;var g=l.get(y.value);return{done:!1,value:g}},h},d.entries=function(){var l=this,h,v=this.keys();return h={},h[ur]=function(){return l.entries()},h.next=function(){var y=v.next();if(y.done)return y;var g=l.get(y.value);return{done:!1,value:[y.value,g]}},h},d[ur]=function(){return this.entries()},s}(Map);function n(o,s){return new r(o,s)}function i(o){o.copy_||(o.assigned_=new Map,o.copy_=new Map(o.base_))}var a=function(o){t(s,o);function s(l,h){return this[T]={type_:3,parent_:h,scope_:h?h.scope_:Dt(),modified_:!1,finalized_:!1,copy_:void 0,base_:l,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1},this}var d=s.prototype;return Object.defineProperty(d,"size",{get:function(){return Y(this[T]).size}}),d.has=function(l){var h=this[T];return c(h),h.copy_?!!(h.copy_.has(l)||h.drafts_.has(l)&&h.copy_.has(h.drafts_.get(l))):h.base_.has(l)},d.add=function(l){var h=this[T];return c(h),this.has(l)||(f(h),oe(h),h.copy_.add(l)),this},d.delete=function(l){if(!this.has(l))return!1;var h=this[T];return c(h),f(h),oe(h),h.copy_.delete(l)||(h.drafts_.has(l)?h.copy_.delete(h.drafts_.get(l)):!1)},d.clear=function(){var l=this[T];c(l),Y(l).size&&(f(l),oe(l),l.copy_.clear())},d.values=function(){var l=this[T];return c(l),f(l),l.copy_.values()},d.entries=function(){var h=this[T];return c(h),f(h),h.copy_.entries()},d.keys=function(){return this.values()},d[ur]=function(){return this.values()},d.forEach=function(h,v){for(var p=this.values(),y=p.next();!y.done;)h.call(v,y.value,y.value,this),y=p.next()},s}(Set);function u(o,s){return new a(o,s)}function f(o){o.copy_||(o.copy_=new Set,o.base_.forEach(function(s){if(be(s)){var d=Ct(o.scope_.immer_,s,o);o.drafts_.set(s,d),o.copy_.add(d)}else o.copy_.add(s)}))}function c(o){o.revoked_&&V(3,JSON.stringify(Y(o)))}Sn("MapSet",{proxyMap_:n,proxySet_:u})}function zu(){va(),ya(),pa()}var ce=new la,ga=ce.produce,ku=ce.produceWithPatches.bind(ce),qu=ce.setAutoFreeze.bind(ce),Lu=ce.setUseProxies.bind(ce),Uu=ce.applyPatches.bind(ce),Vu=ce.createDraft.bind(ce),Xu=ce.finishDraft.bind(ce);function Gu(e){return e}function Ju(e){return e}G.Immer=la;G.applyPatches=Uu;G.castDraft=Gu;G.castImmutable=Ju;G.createDraft=Vu;G.current=da;G.default=ga;G.enableAllPlugins=zu;G.enableES5=va;G.enableMapSet=ya;G.enablePatches=pa;G.finishDraft=Xu;G.freeze=yr;G.immerable=st;G.isDraft=xe;G.isDraftable=be;G.nothing=hr;G.original=Nu;G.produce=ga;G.produceWithPatches=ku;G.setAutoFreeze=qu;G.setUseProxies=Lu});var ma=q((Cf,wn)=>{"use strict";process.env.NODE_ENV==="production"?wn.exports=ra():wn.exports=_a()});var Sa=q(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.createUpdater=ct.assign=void 0;var Wu=Zr(),Ku=ma();function ba(e){return(0,Wu.assign)(function(t,r,n){return(0,Ku.produce)(t,function(i){return void e(i,r,n)})})}ct.assign=ba;function $u(e,t){var r=function(n){return{type:e,input:n}};return{update:r,action:ba(function(n,i,a){t(n,i,a)}),type:e}}ct.createUpdater=$u});var Da=Ln(Sa());function re(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(process.env.NODE_ENV!=="production"){var i=nf[e],a=i?typeof i=="function"?i.apply(null,r):i:"unknown error nr: "+e;throw Error("[Immer] "+a)}throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function lt(e){return!!e&&!!e[z]}function ze(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===af}(e)||Array.isArray(e)||!!e[Ta]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ta])||Nn(e)||Dn(e))}function dt(e,t,r){r===void 0&&(r=!1),vt(e)===0?(r?Object.keys:zn)(e).forEach(function(n){r&&typeof n=="symbol"||t(n,e[n],e)}):e.forEach(function(n,i){return t(i,n,e)})}function vt(e){var t=e[z];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Nn(e)?2:Dn(e)?3:0}function En(e,t){return vt(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Yu(e,t){return vt(e)===2?e.get(t):e[t]}function Ia(e,t,r){var n=vt(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function Bu(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Nn(e){return tf&&e instanceof Map}function Dn(e){return rf&&e instanceof Set}function te(e){return e.o||e.t}function Mn(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=of(e);delete t[z];for(var r=zn(t),n=0;n<r.length;n++){var i=r[n],a=t[i];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function Rn(e,t){return t===void 0&&(t=!1),Cn(e)||lt(e)||!ze(e)||(vt(e)>1&&(e.set=e.add=e.clear=e.delete=Qu),Object.freeze(e),t&&dt(e,function(r,n){return Rn(n,!0)},!0)),e}function Qu(){re(2)}function Cn(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Ee(e){var t=In[e];return t||re(18,e),t}function Hu(e,t){In[e]||(In[e]=t)}function _r(){return process.env.NODE_ENV==="production"||ht||re(0),ht}function On(e,t){t&&(Ee("Patches"),e.u=[],e.s=[],e.v=t)}function mr(e){Tn(e),e.p.forEach(Zu),e.p=null}function Tn(e){e===ht&&(ht=e.l)}function wa(e){return ht={p:[],l:ht,h:e,m:!0,_:0}}function Zu(e){var t=e[z];t.i===0||t.i===1?t.j():t.g=!0}function Pn(e,t){t._=t.p.length;var r=t.p[0],n=e!==void 0&&e!==r;return t.h.O||Ee("ES5").S(t,e,n),n?(r[z].P&&(mr(t),re(4)),ze(e)&&(e=br(t,e),t.l||Sr(t,e)),t.u&&Ee("Patches").M(r[z].t,e,t.u,t.s)):e=br(t,r,[]),mr(t),t.u&&t.v(t.u,t.s),e!==Na?e:void 0}function br(e,t,r){if(Cn(t))return t;var n=t[z];if(!n)return dt(t,function(f,c){return Oa(e,n,t,f,c,r)},!0),t;if(n.A!==e)return t;if(!n.P)return Sr(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=Mn(n.k):n.o,a=i,u=!1;n.i===3&&(a=new Set(i),i.clear(),u=!0),dt(a,function(f,c){return Oa(e,n,i,f,c,r,u)}),Sr(e,i,!1),r&&e.u&&Ee("Patches").N(n,r,e.u,e.s)}return n.o}function Oa(e,t,r,n,i,a,u){if(process.env.NODE_ENV!=="production"&&i===r&&re(5),lt(i)){var f=br(e,i,a&&t&&t.i!==3&&!En(t.R,n)?a.concat(n):void 0);if(Ia(r,n,f),!lt(f))return;e.m=!1}else u&&r.add(i);if(ze(i)&&!Cn(i)){if(!e.h.D&&e._<1)return;br(e,i),t&&t.A.l||Sr(e,i)}}function Sr(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Rn(t,r)}function An(e,t){var r=e[z];return(r?te(r):e)[t]}function Pa(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function Fe(e){e.P||(e.P=!0,e.l&&Fe(e.l))}function xn(e){e.o||(e.o=Mn(e.t))}function zt(e,t,r){var n=Nn(t)?Ee("MapSet").F(t,r):Dn(t)?Ee("MapSet").T(t,r):e.O?function(i,a){var u=Array.isArray(i),f={i:u?1:0,A:a?a.A:_r(),P:!1,I:!1,R:{},l:a,t:i,k:null,o:null,j:null,C:!1},c=f,o=jn;u&&(c=[f],o=Ft);var s=Proxy.revocable(c,o),d=s.revoke,l=s.proxy;return f.k=l,f.j=d,l}(t,r):Ee("ES5").J(t,r);return(r?r.A:_r()).p.push(n),n}function ef(e){return lt(e)||re(22,e),function t(r){if(!ze(r))return r;var n,i=r[z],a=vt(r);if(i){if(!i.P&&(i.i<4||!Ee("ES5").K(i)))return i.t;i.I=!0,n=Aa(r,a),i.I=!1}else n=Aa(r,a);return dt(n,function(u,f){i&&Yu(i.t,u)===f||Ia(n,u,t(f))}),a===3?new Set(n):n}(e)}function Aa(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Mn(e)}function ja(){function e(f,c){function o(){this.constructor=f}i(f,c),f.prototype=(o.prototype=c.prototype,new o)}function t(f){f.o||(f.R=new Map,f.o=new Map(f.t))}function r(f){f.o||(f.o=new Set,f.t.forEach(function(c){if(ze(c)){var o=zt(f.A.h,c,f);f.p.set(c,o),f.o.add(o)}else f.o.add(c)}))}function n(f){f.g&&re(3,JSON.stringify(te(f)))}var i=function(f,c){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var d in s)s.hasOwnProperty(d)&&(o[d]=s[d])})(f,c)},a=function(){function f(o,s){return this[z]={i:2,l:s,A:s?s.A:_r(),P:!1,I:!1,o:void 0,R:void 0,t:o,k:this,C:!1,g:!1},this}e(f,Map);var c=f.prototype;return Object.defineProperty(c,"size",{get:function(){return te(this[z]).size}}),c.has=function(o){return te(this[z]).has(o)},c.set=function(o,s){var d=this[z];return n(d),te(d).has(o)&&te(d).get(o)===s||(t(d),Fe(d),d.R.set(o,!0),d.o.set(o,s),d.R.set(o,!0)),this},c.delete=function(o){if(!this.has(o))return!1;var s=this[z];return n(s),t(s),Fe(s),s.t.has(o)?s.R.set(o,!1):s.R.delete(o),s.o.delete(o),!0},c.clear=function(){var o=this[z];n(o),te(o).size&&(t(o),Fe(o),o.R=new Map,dt(o.t,function(s){o.R.set(s,!1)}),o.o.clear())},c.forEach=function(o,s){var d=this;te(this[z]).forEach(function(l,h){o.call(s,d.get(h),h,d)})},c.get=function(o){var s=this[z];n(s);var d=te(s).get(o);if(s.I||!ze(d)||d!==s.t.get(o))return d;var l=zt(s.A.h,d,s);return t(s),s.o.set(o,l),l},c.keys=function(){return te(this[z]).keys()},c.values=function(){var o,s=this,d=this.keys();return(o={})[gr]=function(){return s.values()},o.next=function(){var l=d.next();return l.done?l:{done:!1,value:s.get(l.value)}},o},c.entries=function(){var o,s=this,d=this.keys();return(o={})[gr]=function(){return s.entries()},o.next=function(){var l=d.next();if(l.done)return l;var h=s.get(l.value);return{done:!1,value:[l.value,h]}},o},c[gr]=function(){return this.entries()},f}(),u=function(){function f(o,s){return this[z]={i:3,l:s,A:s?s.A:_r(),P:!1,I:!1,o:void 0,t:o,k:this,p:new Map,g:!1,C:!1},this}e(f,Set);var c=f.prototype;return Object.defineProperty(c,"size",{get:function(){return te(this[z]).size}}),c.has=function(o){var s=this[z];return n(s),s.o?!!s.o.has(o)||!(!s.p.has(o)||!s.o.has(s.p.get(o))):s.t.has(o)},c.add=function(o){var s=this[z];return n(s),this.has(o)||(r(s),Fe(s),s.o.add(o)),this},c.delete=function(o){if(!this.has(o))return!1;var s=this[z];return n(s),r(s),Fe(s),s.o.delete(o)||!!s.p.has(o)&&s.o.delete(s.p.get(o))},c.clear=function(){var o=this[z];n(o),te(o).size&&(r(o),Fe(o),o.o.clear())},c.values=function(){var o=this[z];return n(o),r(o),o.o.values()},c.entries=function(){var o=this[z];return n(o),r(o),o.o.entries()},c.keys=function(){return this.values()},c[gr]=function(){return this.values()},c.forEach=function(o,s){for(var d=this.values(),l=d.next();!l.done;)o.call(s,l.value,l.value,this),l=d.next()},f}();Hu("MapSet",{F:function(f,c){return new a(f,c)},T:function(f,c){return new u(f,c)}})}var xa,ht,Fn=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",tf=typeof Map<"u",rf=typeof Set<"u",Ea=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",Na=Fn?Symbol.for("immer-nothing"):((xa={})["immer-nothing"]=!0,xa),Ta=Fn?Symbol.for("immer-draftable"):"__$immer_draftable",z=Fn?Symbol.for("immer-state"):"__$immer_state",gr=typeof Symbol<"u"&&Symbol.iterator||"@@iterator",nf={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},af=""+Object.prototype.constructor,zn=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,of=Object.getOwnPropertyDescriptors||function(e){var t={};return zn(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},In={},jn={get:function(e,t){if(t===z)return e;var r=te(e);if(!En(r,t))return function(i,a,u){var f,c=Pa(a,u);return c?"value"in c?c.value:(f=c.get)===null||f===void 0?void 0:f.call(i.k):void 0}(e,r,t);var n=r[t];return e.I||!ze(n)?n:n===An(e.t,t)?(xn(e),e.o[t]=zt(e.A.h,n,e)):n},has:function(e,t){return t in te(e)},ownKeys:function(e){return Reflect.ownKeys(te(e))},set:function(e,t,r){var n=Pa(te(e),t);if(n?.set)return n.set.call(e.k,r),!0;if(!e.P){var i=An(te(e),t),a=i?.[z];if(a&&a.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(Bu(r,i)&&(r!==void 0||En(e.t,t)))return!0;xn(e),Fe(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return An(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,xn(e),Fe(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=te(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty:function(){re(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){re(12)}},Ft={};dt(jn,function(e,t){Ft[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ft.deleteProperty=function(e,t){return process.env.NODE_ENV!=="production"&&isNaN(parseInt(t))&&re(13),Ft.set.call(this,e,t,void 0)},Ft.set=function(e,t,r){return process.env.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&re(14),jn.set.call(this,e[0],t,r,e[0])};var sf=function(){function e(r){var n=this;this.O=Ea,this.D=!0,this.produce=function(i,a,u){if(typeof i=="function"&&typeof a!="function"){var f=a;a=i;var c=n;return function(p){var y=this;p===void 0&&(p=f);for(var g=arguments.length,_=Array(g>1?g-1:0),m=1;m<g;m++)_[m-1]=arguments[m];return c.produce(p,function(w){var O;return(O=a).call.apply(O,[y,w].concat(_))})}}var o;if(typeof a!="function"&&re(6),u!==void 0&&typeof u!="function"&&re(7),ze(i)){var s=wa(n),d=zt(n,i,void 0),l=!0;try{o=a(d),l=!1}finally{l?mr(s):Tn(s)}return typeof Promise<"u"&&o instanceof Promise?o.then(function(p){return On(s,u),Pn(p,s)},function(p){throw mr(s),p}):(On(s,u),Pn(o,s))}if(!i||typeof i!="object"){if((o=a(i))===void 0&&(o=i),o===Na&&(o=void 0),n.D&&Rn(o,!0),u){var h=[],v=[];Ee("Patches").M(i,o,h,v),u(h,v)}return o}re(21,i)},this.produceWithPatches=function(i,a){if(typeof i=="function")return function(o){for(var s=arguments.length,d=Array(s>1?s-1:0),l=1;l<s;l++)d[l-1]=arguments[l];return n.produceWithPatches(o,function(h){return i.apply(void 0,[h].concat(d))})};var u,f,c=n.produce(i,a,function(o,s){u=o,f=s});return typeof Promise<"u"&&c instanceof Promise?c.then(function(o){return[o,u,f]}):[c,u,f]},typeof r?.useProxies=="boolean"&&this.setUseProxies(r.useProxies),typeof r?.autoFreeze=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){ze(r)||re(8),lt(r)&&(r=ef(r));var n=wa(this),i=zt(this,r,void 0);return i[z].C=!0,Tn(n),i},t.finishDraft=function(r,n){var i=r&&r[z];process.env.NODE_ENV!=="production"&&(i&&i.C||re(9),i.I&&re(10));var a=i.A;return On(a,n),Pn(void 0,a)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Ea&&re(20),this.O=r},t.applyPatches=function(r,n){var i;for(i=n.length-1;i>=0;i--){var a=n[i];if(a.path.length===0&&a.op==="replace"){r=a.value;break}}i>-1&&(n=n.slice(i+1));var u=Ee("Patches").$;return lt(r)?u(r,n):this.produce(r,function(f){return u(f,n)})},e}(),le=new sf,zf=le.produce,kf=le.produceWithPatches.bind(le),qf=le.setAutoFreeze.bind(le),Lf=le.setUseProxies.bind(le),Uf=le.applyPatches.bind(le),Vf=le.createDraft.bind(le),Xf=le.finishDraft.bind(le);var wr=Ln(Zr());ja();var uf=(0,wr.createMachine)({id:"test",initial:"pending",preserveActionOrder:!0,context:{testMap:new Map},states:{pending:{entry:(0,Da.assign)(e=>{e.testMap.set("michel",{name:"Michel Weststrate",country:"NL"})})},resolved:{},rejected:{}}});(0,wr.interpret)(uf).start().subscribe(console.log);
/*! Bundled license information:

xstate/lib/_virtual/_tslib.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
